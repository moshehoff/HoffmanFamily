(function(){var ke='<svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg>',re='<svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true"><path fill-rule="evenodd" fill="rgb(63, 185, 80)" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg>';document.addEventListener("nav",()=>{let qe=document.getElementsByTagName("pre");for(let de=0;de<qe.length;de++){let ze=qe[de].getElementsByTagName("code")[0];if(ze){let ve=function(){navigator.clipboard.writeText(pe).then(()=>{Se.blur(),Se.innerHTML=re,setTimeout(()=>{Se.innerHTML=ke,Se.style.borderColor=""},2e3)},Ze=>console.error(Ze))};var Ee=ve;let pe=(ze.dataset.clipboard?JSON.parse(ze.dataset.clipboard):ze.innerText).replace(/\n\n/g,`
`),Se=document.createElement("button");Se.className="clipboard-button",Se.type="button",Se.innerHTML=ke,Se.ariaLabel="Copy source",Se.addEventListener("click",ve),window.addCleanup(()=>Se.removeEventListener("click",ve)),qe[de].prepend(Se)}}})})(),(function(){const ke=document.querySelector(".navbar-toggle"),re=document.querySelector(".navbar-menu");ke&&re&&(ke.addEventListener("click",function(){this.classList.toggle("active"),re.classList.toggle("active")}),document.addEventListener("click",function(Ee){!(ke.contains(Ee.target)||re.contains(Ee.target))&&re.classList.contains("active")&&(ke.classList.remove("active"),re.classList.remove("active"))}),re.querySelectorAll("a").forEach(function(Ee){Ee.addEventListener("click",function(){ke.classList.remove("active"),re.classList.remove("active")})}))})(),(function(){let ke=[],re=null,qe={},Ee=!0,de=null;function ze(){console.log("[ProfileTabs] initProfileTabs() called"),Ee=!0,qe={},re=null,de=null,ke.forEach(function(L){L()}),ke=[];const ve=document.querySelector(".profile-tabs");if(console.log("[ProfileTabs] profileTabs element:",ve),!ve){console.log("[ProfileTabs] No profileTabs found, skipping");return}const pe=ve.getAttribute("data-profile-id");let Se=ve.getAttribute("data-base-path")||"";Se&&!Se.endsWith("/")&&(Se=Se+"/");const Ze=document.querySelectorAll(".tab-button"),tt=document.querySelectorAll(".tab-pane"),W=document.getElementById("media-tab-button"),Ne=document.getElementById("documents-tab-button");window.innerWidth<=768&&Ze.forEach(function(L){const k=L.textContent.trim();L.textContent=k.replace(/ðŸ“–|ðŸ–¼ï¸|ðŸ“„/g,"").trim()});let Ve=!1,Ie=!1;function Ke(){const L=window.location.hash;if(!L)return;let k=null;const N=L.match(/[&?#]tab=([^&]+)/);if(N)k=N[1];else{const I=L.match(/[#&]tab([^&]+)/);I&&(k=I[1])}if(k){console.log("[ProfileTabs] Restoring tab from hash:",k);const I=document.querySelector('[data-tab="'+k+'"]'),S=document.querySelector('[data-tab-content="'+k+'"]');if(I&&S){if(document.querySelectorAll(".tab-button").forEach(function(A){A.classList.remove("active")}),document.querySelectorAll(".tab-pane").forEach(function(A){A.classList.remove("active")}),I.classList.add("active"),S.classList.add("active"),k==="media"&&pe){const A=S.querySelector("#media-content");A&&A.innerHTML&&!A.innerHTML.includes("Loading")&&!A.innerHTML.includes("Loading gallery")||(console.log("[ProfileTabs] Loading media for restored gallery tab"),O(pe),Ve=!0)}if(k==="documents"&&pe){const A=S.querySelector("#documents-content");A&&A.innerHTML&&!A.innerHTML.includes("Loading")&&!A.innerHTML.includes("Loading documents")||(console.log("[ProfileTabs] Loading documents for restored documents tab"),J(pe),Ie=!0)}}}}if(console.log("[ProfileTabs] Initializing, profileId:",pe,"basePath:",Se),!pe)return;function ut(){fetch(Se+"static/chapters-index.json").then(function(L){return L.ok?L.json():(console.log("[ProfileTabs] No chapters index found"),null)}).then(function(L){L&&(re=L[pe]||null,re&&(console.log("[ProfileTabs] Found chapters for profile",pe,re),setTimeout(function(){const k=document.querySelector("article"),N=document.querySelector(".profile-tabs"),I=document.querySelector(".biography-banner-top");if(k&&N&&!I){const S=document.createElement("div");S.className="biography-banner-top",S.innerHTML="\u{1F4D6} View Biography Chapters Below \u2B07\uFE0F",S.style.cursor="pointer",S.addEventListener("click",function(){const A=document.querySelector('[data-tab="biography"]'),B=document.querySelector('[data-tab-content="biography"]'),v=document.querySelector(".tab-button.active");A&&B&&(!v||v.getAttribute("data-tab")!=="biography")&&(document.querySelectorAll(".tab-button").forEach(function(q){q.classList.remove("active")}),document.querySelectorAll(".tab-pane").forEach(function(q){q.classList.remove("active")}),A.classList.add("active"),B.classList.add("active")),setTimeout(function(){const q=document.querySelector(".biography-heading");if(q)q.scrollIntoView({behavior:"smooth",block:"start"});else{const ie=document.querySelector('[data-tab-content="biography"]');ie&&ie.scrollIntoView({behavior:"smooth",block:"start"})}},100)}),k.insertBefore(S,N),console.log("[ProfileTabs] Added biography banner")}},150),setTimeout(function(){at(re)},200)))}).catch(function(L){console.log("[ProfileTabs] Error loading chapters index:",L)})}function ht(){const L="?t="+Date.now();fetch(Se+"static/media-index.json"+L,{cache:"no-store",headers:{"Cache-Control":"no-cache"}}).then(function(k){return k.ok?k.json():(console.log("[ProfileTabs] No media index found"),null)}).then(function(k){if(!k)return;const N=k.images[pe]||[],I=k.documents[pe]||[];console.log("[ProfileTabs] Found",N.length,"images and",I.length,"documents for profile",pe),N.length>0?W&&(W.style.display="block"):W&&(W.style.display="none"),I.length>0?Ne&&(Ne.style.display="block"):Ne&&(Ne.style.display="none")}).catch(function(k){console.log("[ProfileTabs] Error checking media content:",k),W&&(W.style.display="none"),Ne&&(Ne.style.display="none")})}ht();function me(){const L=document.querySelector(".profile-tabs"),k=document.querySelector("article");L&&k&&L.parentElement!==k&&(k.appendChild(L),console.log("[ProfileTabs] Moved ProfileTabs to article"))}function ot(){const L=document.querySelector(".profile-tabs"),k=document.querySelector('[data-tab-content="biography"]'),N=document.querySelector("article");if(!L||!k||!N){console.log("[ProfileTabs] Cannot find required elements");return}L.parentElement!==N&&(N.appendChild(L),console.log("[ProfileTabs] Moved ProfileTabs to article"));const I=Array.from(N.children);let S=-1;for(let A=0;A<I.length;A++)if(I[A]===L){S=A;break}if(S>0){const A=[];for(let T=0;T<S;T++)A.push(I[T]);const B=[];let v=!1;console.log("[ProfileTabs] elementsToMove count:",A.length),A.forEach(function(T,R){if(console.log("[ProfileTabs] Processing element",R,":",T.tagName,T.textContent?T.textContent.substring(0,50):""),v){v=!1;return}if(T.tagName&&T.tagName.toLowerCase()==="h2"&&T.textContent&&T.textContent.trim()==="Biography"){const te=T.nextElementSibling;if(te&&te.textContent&&te.textContent.includes("chapters will be loaded")){console.log("[ProfileTabs] Removing placeholder Biography heading and text"),v=!0,te.remove(),T.remove();return}else{console.log("[ProfileTabs] Removing Biography heading (keeping content after)"),T.remove();return}}if(T.tagName&&T.tagName.toLowerCase()==="p"&&T.textContent&&T.textContent.includes("chapters will be loaded")){console.log("[ProfileTabs] Removing placeholder paragraph"),T.remove();return}console.log("[ProfileTabs] Keeping element:",T.tagName),B.push(T)});const q=B.filter(function(T){return T.parentElement!==null}),ie=[],F=[],X=[],be=[];q.forEach(function(T){const R=T.tagName?T.tagName.toLowerCase():"",te=T.className?T.className.toString():"";R==="dl"||R==="div"&&T.querySelector("dl")?ie.push(T):R==="h2"&&T.getAttribute("id")&&!T.getAttribute("id").includes("biography")||te.includes("mermaid")||T.querySelector(".mermaid")||T.querySelector("mermaid")||R==="code"&&T.textContent&&T.textContent.includes("graph")?F.push(T):R==="p"||R==="ul"||R==="ol"||R==="blockquote"||R==="div"||R==="pre"?X.push(T):be.push(T)});const p=ie.concat(F).concat(X).concat(be),E=k.querySelector("h2");if(E&&E.textContent&&(E.textContent.trim()==="Biography"||E.textContent.trim().includes("Biography"))){const T=E.nextElementSibling;T&&T.textContent&&T.textContent.includes("chapters will be loaded")&&T.remove(),E.remove()}k.querySelectorAll("p").forEach(function(T){T.textContent&&T.textContent.includes("chapters will be loaded")&&T.remove()});const $=k.querySelector(".chapter-tabs-container");Array.from(k.children).forEach(function(T){T!==$&&T.remove()}),p.forEach(function(T){$?k.insertBefore(T,$):k.appendChild(T)}),console.log("[ProfileTabs] Moved",p.length,"elements to Biography tab (sorted)"),setTimeout(function(){window.mermaid&&(k.querySelectorAll(".mermaid, mermaid, code.language-mermaid").forEach(function(R){try{if(!R.hasAttribute("data-processed"))if(R.tagName&&R.tagName.toLowerCase()==="code"){const te=R.textContent;if(te){const Te=document.createElement("div");Te.className="mermaid",Te.textContent=te,R.parentElement.replaceChild(Te,R),window.mermaid.init(void 0,Te),Te.setAttribute("data-processed","true")}}else window.mermaid.init(void 0,R),R.setAttribute("data-processed","true")}catch(te){console.log("[ProfileTabs] Error initializing Mermaid:",te)}}),window.mermaid&&typeof window.mermaid.run=="function"&&window.mermaid.run())},500)}}setTimeout(function(){me(),ot()},100),ut();function at(L){const k=document.querySelector('[data-tab-content="biography"]');if(!k)return;const N=k.querySelector(".chapter-tabs-container");N&&N.remove();const I=document.createElement("div");I.className="chapter-tabs-container";const S=document.createElement("h2");S.className="biography-heading",S.textContent="Biography",I.appendChild(S);const A=document.createElement("div");A.className="chapter-tabs-header";const B=document.createElement("div");B.className="chapter-tabs-content";const v=window.location.hash,q=v&&v.includes("tab=media"),ie=v&&v.includes("#chapter="),F=!q&&ie?v.substring(v.indexOf("#chapter=")+9).split("&")[0].split("#")[0].trim():null;if(L.main){const M=document.createElement("button"),$=F===L.main.slug;M.className="chapter-tab-button"+($?" active":""),M.setAttribute("data-chapter-tab","introduction"),M.setAttribute("data-chapter-slug",L.main.slug),M.textContent=window.innerWidth<=768?"Introduction":"\u{1F4D6} Introduction",A.appendChild(M);const K=document.createElement("div");K.className="chapter-tab-pane"+($||!ie?" active":""),K.setAttribute("data-chapter-tab-content","introduction"),K.setAttribute("data-chapter-slug",L.main.slug),K.innerHTML='<div class="loading-message">Loading chapter...</div>',B.appendChild(K)}L.chapters.forEach(function(M,$){const K=document.createElement("button"),T=F===M.slug;K.className="chapter-tab-button"+(T?" active":""),K.setAttribute("data-chapter-tab","chapter-"+($+1)),K.setAttribute("data-chapter-slug",M.slug),K.textContent=window.innerWidth<=768?M.title:"\u{1F4C4} "+M.title,A.appendChild(K);const R=document.createElement("div");R.className="chapter-tab-pane"+(T?" active":""),R.setAttribute("data-chapter-tab-content","chapter-"+($+1)),R.setAttribute("data-chapter-slug",M.slug),R.innerHTML='<div class="loading-message">Loading chapter...</div>',B.appendChild(R)}),I.appendChild(A),I.appendChild(B);const X=Array.from(k.children).filter(function(M){return!M.classList.contains("chapter-tabs-container")});if(X.length>0){const M=X[X.length-1];k.insertBefore(I,M.nextSibling)}else k.appendChild(I);setTimeout(function(){document.querySelectorAll(".chapter-tab-button").forEach(function(M){const $=function(){const K=M.getAttribute("data-chapter-slug");K&&Ue(K)};M.addEventListener("click",$),ke.push(function(){M.removeEventListener("click",$)})})},50);const be=window.location.hash,p=be&&be.includes("tab=media"),E=be&&be.includes("#chapter=");F&&!p&&E?setTimeout(function(){typeof Ue=="function"?Ue(F):(console.log("[ProfileTabs] switchToChapter not yet defined, retrying..."),setTimeout(function(){typeof Ue=="function"&&Ue(F)},100))},50):!E&&L.main&&setTimeout(function(){typeof rt=="function"&&rt(L.main.slug)},50),setTimeout(function(){const M=window.location.hash;M&&M.includes("tab=media")&&(console.log("[ProfileTabs] Restoring media tab after createChapterTabs"),Ke())},100)}function Ue(L,k){L&&(L=L.split("&")[0].split("#")[0].trim()),console.log("[ProfileTabs] Switching to chapter:",L,"fromPopstate:",k),document.querySelectorAll(".chapter-tab-button").forEach(function(v){v.classList.remove("active")}),document.querySelectorAll(".chapter-tab-pane").forEach(function(v){v.classList.remove("active")});const N=document.querySelector('.chapter-tab-button[data-chapter-slug="'+L+'"]');N&&N.classList.add("active");const I=document.querySelector('.chapter-tab-pane[data-chapter-slug="'+L+'"]');I&&I.classList.add("active");const S=window.location.hash;if(!(S&&S.includes("tab=media"))){const v=document.querySelector('[data-tab="biography"]'),q=document.querySelector('[data-tab-content="biography"]');v&&q&&(document.querySelectorAll(".tab-button").forEach(function(ie){ie.classList.remove("active")}),document.querySelectorAll(".tab-pane").forEach(function(ie){ie.classList.remove("active")}),v.classList.add("active"),q.classList.add("active"))}rt(L);const B=Ee&&!k;if(!k){const v=window.location.pathname+"#chapter="+L+"&tab=biography";Ee?(history.replaceState({chapter:L,tab:"biography"},"",v),Ee=!1):history.pushState({chapter:L,tab:"biography"},"",v)}B&&setTimeout(function(){const v=document.querySelector(".chapter-tabs-container");if(v)v.scrollIntoView({behavior:"smooth",block:"start"});else{const q=document.querySelector('.chapter-tab-pane[data-chapter-slug="'+L+'"].active');q&&q.scrollIntoView({behavior:"smooth",block:"start"})}},500)}function rt(L){if(L&&(L=L.split("&")[0].split("#")[0].trim()),qe[L]){Fe(L,qe[L]);return}var k=null;if(re){if(re.main&&re.main.slug===L)k=re.main.filename;else for(var N=0;N<re.chapters.length;N++)if(re.chapters[N].slug===L){k=re.chapters[N].filename;break}}var I=k||L+".md";const S=Se+"static/chapters/"+pe+"/"+I;console.log("[ProfileTabs] Loading chapter:",S,"(slug:",L+")"),dt(Se).then(function(){return fetch(S+"?t="+Date.now())}).then(function(A){if(!A.ok)throw console.log("[ProfileTabs] Chapter not found:",S,"status:",A.status),new Error("Chapter not found: "+S);return A.text()}).then(function(A){const B=bt(A,re,pe,Se);qe[L]=B,Fe(L,B)}).catch(function(A){console.log("[ProfileTabs] Error loading chapter:",A);const B=document.querySelector('.chapter-tab-pane[data-chapter-slug="'+L+'"]');B&&(B.innerHTML='<div class="empty-message">Error loading chapter: '+A.message+"</div>")})}function Fe(L,k){const N=document.querySelector('.chapter-tab-pane[data-chapter-slug="'+L+'"]');if(N){N.innerHTML=k;const I=N.querySelectorAll(".chapter-link");console.log("[ProfileTabs] Found",I.length,"chapter links in",L),I.forEach(function(S){S.addEventListener("click",function(A){A.preventDefault(),A.stopPropagation();const B=S.getAttribute("data-chapter-slug");console.log("[ProfileTabs] Chapter link clicked, target:",B),B&&Ue(B,!1)})}),setTimeout(function(){window.mermaid&&N.querySelectorAll(".mermaid, mermaid, code.language-mermaid").forEach(function(A){try{if(!A.hasAttribute("data-processed"))if(A.tagName&&A.tagName.toLowerCase()==="code"){const B=A.textContent;if(B){const v=document.createElement("div");v.className="mermaid",v.textContent=B,A.parentElement.replaceChild(v,A),window.mermaid.init(void 0,v),v.setAttribute("data-processed","true")}}else window.mermaid.init(void 0,A),A.setAttribute("data-processed","true")}catch(B){console.log("[ProfileTabs] Error initializing Mermaid:",B)}})},100)}}function dt(L){return de!==null?Promise.resolve(de):fetch(L+"static/id-to-slug.json").then(function(k){return k.ok?k.json():(console.log("[ProfileTabs] Could not load id-to-slug.json"),{})}).then(function(k){return de=k,k}).catch(function(k){return console.log("[ProfileTabs] Error loading id-to-slug.json:",k),de={},{}})}function bt(L,k,N,I){var S=L,A="\r",B=`
`,v=A+B;S=S.split(v).join(B).split(A).join(B);var q="";if(typeof window<"u"){var ie=window.location.pathname;if(ie.indexOf("/profiles/")>0){var F=ie.substring(0,ie.indexOf("/profiles/"));F&&F!==""&&F!=="/"&&(q=F)}}var X="`",be=X+X+X+"(\\w+)?\\s*([\\s\\S]*?)"+X+X+X,p=new RegExp(be,"g");S=S.replace(p,function(je,$e,Ce){Ce=Ce.replace(/^\n+|\n+$/g,""),Ce=Ce.replace(/\[([^\|]+)\|(I\d+)\]/g,function(Je,st,Re){var ct=Re;return de&&de[Re]?ct=de[Re]:console.log("[ProfileTabs] Warning: ID to slug mapping not available for",Re,"- using ID as fallback"),"["+st+"](/profiles/"+encodeURIComponent(ct)+")"}),Ce=Ce.replace(/\[([^\|]+)\|(\d+)\]/g,function(Je,st,Re){var ct="I"+Re,pt=Re;return de&&de[ct]?pt=de[ct]:de&&de[Re]?pt=de[Re]:console.log("[ProfileTabs] Warning: Could not find slug for numeric ID",Re,"- using as-is"),"["+st+"](/profiles/"+encodeURIComponent(pt)+")"});var Xe=new RegExp("\\[([^\\]]+)\\]\\(\\/profiles\\/([^)]+)\\)","g");Ce=Ce.replace(Xe,function(Je,st,Re){var ct=/^[0-9]+$/.test(Re)||/^I\d+$/.test(Re);if(ct){var pt=Re;if(de)if(de[Re])pt=de[Re];else if(/^[0-9]+$/.test(Re)){var yt="I"+Re;de[yt]?pt=de[yt]:console.log("[ProfileTabs] Warning: Could not find slug for numeric ID",Re,"or",yt)}else console.log("[ProfileTabs] Warning: Could not find slug for ID",Re);else console.log("[ProfileTabs] Warning: ID to slug mapping not loaded yet for link",Re);Re=pt}var jt=/%[0-9A-Fa-f]{2}/.test(Re),Ot=jt?Re:encodeURIComponent(Re);return'<a href="'+q+"/profiles/"+Ot+'">'+st+"</a>"});var vt=Ce.split(/(<a[^>]*>.*?<\/a>)/g);Ce=vt.map(function(Je){return Je.match(/^<a[^>]*>.*?<\/a>$/)?Je:Je.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}).join("");var Qe=$e?' class="language-'+$e+'"':"";return"<pre><code"+Qe+">"+Ce+"</code></pre>"}),S=S.replace(/!\[\[([^\]]+)\]\]/g,function(je,$e){var Ce=$e.split("/").pop(),Xe=Ce.replace(/[ _]/g,"-"),vt=I||"",Qe=vt+Xe,Je=vt+encodeURIComponent(Ce),st=Ce.replace(/"/g,"&quot;");return'<img src="'+Qe+'" alt="'+st+'" onerror="this.src=&quot;'+Je+'&quot;">'});var E=new RegExp("\\[([^\\]]+)\\]\\((https?://[^)]+)\\)","g");S=S.replace(E,function(je,$e,Ce){return'<a href="'+Ce+'">'+$e+"</a>"});var M=new RegExp("\\[([^\\]]+)\\]\\((\\/profiles\\/[^)]+)\\)","g");S=S.replace(M,function(je,$e,Ce){return'<a href="'+q+Ce+'">'+$e+"</a>"});for(var $=S.split(`
`),K=!1,T="",R=[],te=0;te<$.length;te++){var Te=$[te],et=Te.match(/^(\d+)\.\s+(.*)$/);et?(K||(K=!0,T="<ol>"),T+="<li>"+et[2]+"</li>"):(K&&(T+="</ol>",R.push(T),T="",K=!1),R.push(Te))}K&&(T+="</ol>",R.push(T)),S=R.join(`
`),S=S.replace(/\[\[([^\]]+)\]\]/g,function(je,$e){var Ce=$e.split("|"),Xe=Ce[0].trim(),vt=Ce.length>1?Ce[1].trim():Xe;if(Xe.includes("/")){var Qe=Xe.split("/");Xe=Qe[Qe.length-1]}var Je=null;if(k){var st=Xe.toLowerCase().replace(/_/g,"-");if(k.main&&(k.main.slug===st||k.main.name.toLowerCase()===st||k.main.filename.toLowerCase().replace(".md","")===st))Je=k.main.slug;else for(var Re=0;Re<k.chapters.length;Re++){var ct=k.chapters[Re],pt=ct.name.toLowerCase().replace(/_/g,"-"),yt=ct.filename.toLowerCase().replace(".md","").replace(/_/g,"-");if(ct.slug===st||pt===st||yt===st||ct.title.toLowerCase()===st){Je=ct.slug;break}var jt=st.replace(/^\d+-/,""),Ot=pt.replace(/^\d+-/,""),Bt=yt.replace(/^\d+-/,"");if(jt===Ot||jt===Bt){Je=ct.slug;break}}Je||(Je=st)}else Je=Xe.replace(/_/g,"-").toLowerCase();return'<a href="javascript:void(0)" class="chapter-link" data-chapter-slug="'+Je+'">'+vt+"</a>"});var _e=[],it=0;S=S.replace(/<img[^>]*>/g,function(je){var $e="___HTML_BLOCK_"+it+"___";return _e[it]=je,it++,$e}),S=S.replace(/<(a|pre|code)([^>]*)>([\s\S]*?)<\/(a|pre|code)>/g,function(je,$e,Ce,Xe,vt){var Qe=je;$e==="pre"&&Xe.indexOf("<code")!==-1&&(Qe=je.replace(/\[([^\]]+)\]\(([^)]+)\)/g,'<a href="$2">$1</a>'));var Je="___HTML_BLOCK_"+it+"___";return _e[it]=Qe,it++,Je}),S=S.replace(/^### (.*$)/gim,"<h3>$1</h3>"),S=S.replace(/^## (.*$)/gim,"<h2>$1</h2>"),S=S.replace(/^# (.*$)/gim,"<h1>$1</h1>");for(var ue=S.split(/(___HTML_BLOCK_\d+___)/),te=0;te<ue.length;te++)ue[te].match(/^___HTML_BLOCK_\d+___$/)||(ue[te]=ue[te].replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>"),ue[te]=ue[te].replace(/\*(.*?)\*/g,"<em>$1</em>"),ue[te]=ue[te].replace(/(^|[^_\w])_([^_]+)_((?=[^_\w])|$)/g,"$1<em>$2</em>$3"));S=ue.join(""),S=S.replace(/\[([^\]]+)\]\(([^)]+)\)/g,'<a href="$2">$1</a>'),S=S.replace(/___HTML_BLOCK_(\d+)___/g,function(je,$e){var Ce=_e[parseInt($e)];return Ce&&Ce.indexOf("<pre")!==-1&&Ce.indexOf("<code")!==-1&&(Ce=Ce.replace(/\[([^\]]+)\]\(([^)]+)\)/g,'<a href="$2">$1</a>')),Ce}),S=S.replace(/  \r?\n/g,`<br>
`);var _e=[],se=0,fe="___HTML_BLOCK_PLACEHOLDER___",Ge=new RegExp("<((div|blockquote|pre|ul|ol|table)[^>]*)>([sS]*?)</(div|blockquote|pre|ul|ol|table)>","gi");S=S.replace(Ge,function(je,$e,Ce,Xe,vt){var Qe=fe+se+"___";return _e[se]=je,se++,Qe});var ne=S.split(/\n\n/);S=ne.map(function(je){if(je=je.trim(),!je)return"";var $e=je.match(new RegExp(fe+"(d+)___"));if($e){var Ce=parseInt($e[1]);return _e[Ce]}return je.match(/^<(div|blockquote|pre|ul|ol|table|h[1-6]|hr)/i)||je.match(/^<\//)||je.match(/^<[^>]+>.*<\/[^>]+>$/)?je:je&&!je.match(/^<[h|d|u|o|l]/)?"<p>"+je+"</p>":je}).join(`
`);var Ye=/`([^`]+)`/g;return S=S.replace(Ye,"<code>$1</code>"),S}function lt(L,k){if(typeof window.pdfjsLib>"u"){const N=document.querySelector('script[src*="pdf.js"]');if(N){N.addEventListener("load",function(){window.pdfjsLib&&(window.pdfjsLib.GlobalWorkerOptions.workerSrc="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.worker.min.js",G(L,k))});return}const I=document.createElement("script");I.src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js",I.onload=function(){window.pdfjsLib&&(window.pdfjsLib.GlobalWorkerOptions.workerSrc="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.worker.min.js",G(L,k))},I.onerror=function(){console.error("Failed to load PDF.js"),wt(k)},document.head.appendChild(I)}else G(L,k)}function wt(L){const k=L.getContext("2d"),N=600,I=400;L.width=N,L.height=I,k.fillStyle="#f5f5f5",k.fillRect(0,0,N,I),k.fillStyle="#999",k.font="16px Arial",k.textAlign="center",k.fillText("PDF Preview",N/2,I/2)}function G(L,k){if(!window.pdfjsLib){wt(k);return}const N=k.getContext("2d"),I=2,S=600,A=800;k.width=S,k.height=A,N.fillStyle="#f5f5f5",N.fillRect(0,0,S,A),N.fillStyle="#999",N.font="14px Arial",N.textAlign="center",N.fillText("Loading...",S/2,A/2),window.pdfjsLib.getDocument(L).promise.then(function(B){return B.getPage(1)}).then(function(B){const v=B.getViewport({scale:1}),q=v.width,ie=v.height,F=q/ie;let X=q,be=ie;(X>S||be>A)&&(X/S>be/A?(X=S,be=X/F):(be=A,X=be*F)),k.width=X,k.height=be;const p=X/q,E=B.getViewport({scale:p}),M={canvasContext:N,viewport:E};return B.render(M).promise}).catch(function(B){console.error("Error loading PDF thumbnail:",B),wt(k)})}function O(L){console.log("[ProfileTabs] Loading media for profile:",L);const k=document.querySelector('[data-tab-content="media"]'),N=k?k.querySelector("#media-content"):document.getElementById("media-content");if(!N){console.log("[ProfileTabs] media-content not found");return}const I=document.querySelector(".profile-tabs");let S=I&&I.getAttribute("data-base-path")||"";S&&!S.endsWith("/")&&(S=S+"/");const A=S+"static/documents/"+L+"/",B="?t="+Date.now();fetch(S+"static/media-index.json"+B,{cache:"no-store",headers:{"Cache-Control":"no-cache"}}).then(function(v){if(!v.ok)throw new Error("No media index");return v.json()}).then(function(v){const q=v.images[L]||[];if(console.log("[ProfileTabs] Found",q.length,"images"),q.length===0){N.innerHTML='<div class="empty-message">No images available</div>';return}N.innerHTML="";const ie=document.createElement("div");ie.className="media-section",ie.innerHTML='<h3>Images</h3><div class="gallery-grid"></div>',N.appendChild(ie);const F=ie.querySelector(".gallery-grid");q.forEach(function(X){const be=document.createElement("div");be.className="gallery-item";let p;X.path?p=S+(X.path.startsWith("/")?X.path.substring(1):X.path):p=A+X.filename;const E=X.caption?X.caption.replace(/<[^>]*>/g,""):"";let $=X.caption?X.caption.split(`
`).join("<br>"):"";var K=S;if(K&&K.endsWith("/")&&(K=K.substring(0,K.length-1)),$&&K){var T=new RegExp('href="(\\/profiles\\/[^"]+)"',"g");$=$.replace(T,function(te,Te){return'href="'+K+Te+'"'})}const R=document.createElement("img");if(R.src=p,R.alt=E,be.appendChild(R),$){const te=document.createElement("div");te.className="image-caption",te.innerHTML=$,be.appendChild(te)}be.addEventListener("click",function(te){te.target.tagName.toLowerCase()!=="a"&&window.open(p,"_blank")}),F.appendChild(be)})}).catch(function(v){console.log("[ProfileTabs] Media loading error:",v),N.innerHTML='<div class="empty-message">Error loading gallery</div>'})}function J(L){console.log("[ProfileTabs] Loading documents for profile:",L);const k=document.querySelector('[data-tab-content="documents"]'),N=k?k.querySelector("#documents-content"):document.getElementById("documents-content");if(!N){console.log("[ProfileTabs] documents-content not found");return}const I=document.querySelector(".profile-tabs");let S=I&&I.getAttribute("data-base-path")||"";S&&!S.endsWith("/")&&(S=S+"/");const A=S+"static/documents/"+L+"/",B="?t="+Date.now();fetch(S+"static/media-index.json"+B,{cache:"no-store",headers:{"Cache-Control":"no-cache"}}).then(function(v){if(!v.ok)throw new Error("No media index");return v.json()}).then(function(v){const q=v.documents[L]||[];if(console.log("[ProfileTabs] Found",q.length,"documents"),q.length===0){N.innerHTML='<div class="empty-message">No documents available</div>';return}N.innerHTML="";const ie=document.createElement("div");ie.className="media-section",ie.innerHTML='<h3>Documents</h3><div class="gallery-grid"></div>',N.appendChild(ie);const F=ie.querySelector(".gallery-grid");q.forEach(function(X){const be=document.createElement("div");be.className="gallery-item";const p=A+X.filename;if(X.filename.toLowerCase().endsWith(".pdf")){const $=document.createElement("canvas");$.className="document-thumbnail",be.appendChild($),lt(p,$)}else{const $=document.createElement("div");$.className="document-icon-preview",$.textContent=xe(X.filename),be.appendChild($)}const M=X.title||X.filename;if(M){const $=document.createElement("div");$.className="image-caption",$.textContent=M,X.description&&($.innerHTML="<strong>"+M+"</strong><br>"+X.description),be.appendChild($)}be.addEventListener("click",function($){$.target.tagName.toLowerCase()!=="a"&&window.open(p,"_blank")}),F.appendChild(be)})}).catch(function(v){console.log("[ProfileTabs] Documents loading error:",v),N.innerHTML='<div class="empty-message">Error loading documents</div>'})}function xe(L){const k=L.split(".").pop().toLowerCase();return{pdf:"\u{1F4D5}",doc:"\u{1F4D8}",docx:"\u{1F4D8}",xls:"\u{1F4CA}",xlsx:"\u{1F4CA}",txt:"\u{1F4C4}",jpg:"\u{1F5BC}\uFE0F",jpeg:"\u{1F5BC}\uFE0F",png:"\u{1F5BC}\uFE0F",gif:"\u{1F5BC}\uFE0F",wma:"\u{1F3B5}",mp3:"\u{1F3B5}",wav:"\u{1F3B5}",mp4:"\u{1F3AC}",avi:"\u{1F3AC}",mov:"\u{1F3AC}"}[k]||"\u{1F4C4}"}Ze.forEach(function(L){const k=function(){const N=L.getAttribute("data-tab");console.log("[ProfileTabs] Switching to tab:",N),Ze.forEach(function(v){v.classList.remove("active")}),tt.forEach(function(v){v.classList.remove("active")}),L.classList.add("active");const I=document.querySelector('[data-tab-content="'+N+'"]');I&&I.classList.add("active"),N==="media"&&!Ve&&pe&&(O(pe),Ve=!0),N==="documents"&&!Ie&&pe&&(J(pe),Ie=!0);const S=window.location.hash;let A="",B=null;if(S){const v=S.match(/[#&]chapter=([^&]+)/);v&&(B=v[1])}B?A="#chapter="+B+"&tab="+N:A="#tab="+N,history.pushState({tab:N},"",window.location.pathname+A)};L.addEventListener("click",k),ke.push(function(){L.removeEventListener("click",k)})});let Le=!1;const He=function(L){if(Le){console.log("[ProfileTabs] Already handling popstate, skipping");return}console.log("[ProfileTabs] Popstate event:",L.state,"hash:",window.location.hash);const k=document.querySelector(".profile-tabs");if(!k){console.log("[ProfileTabs] No profile-tabs element found, skipping popstate");return}const N=k.getAttribute("data-profile-id");if(console.log("[ProfileTabs] Current profileId from DOM:",N,"Cached profileId:",pe),N!==pe){console.log("[ProfileTabs] Profile changed! Skipping popstate, letting nav event handle it");return}Le=!0;const I=window.location.hash;let S=null,A=null;if(I){const B=I.match(/[&?#]tab=([^&]+)/);if(B)S=B[1];else{const q=I.match(/[#&]tab([^&]+)/);q&&(S=q[1])}const v=I.match(/[#&]chapter=([^&]+)/);v&&(A=v[1].split("&")[0].split("#")[0].trim())}if(S==="media"){console.log("[ProfileTabs] Restoring gallery tab from popstate");const B=document.querySelector('[data-tab="media"]'),v=document.querySelector('[data-tab-content="media"]');if(B&&v){Ze.forEach(function(F){F.classList.remove("active")}),tt.forEach(function(F){F.classList.remove("active")}),B.classList.add("active"),v.classList.add("active");const q=v.querySelector("#media-content");!(q&&q.innerHTML&&!q.innerHTML.includes("Loading")&&!q.innerHTML.includes("Loading gallery")&&!q.innerHTML.includes("empty-message"))&&pe&&(console.log("[ProfileTabs] Loading media for gallery tab from popstate"),O(pe),Ve=!0)}return}else if(S==="documents"){console.log("[ProfileTabs] Restoring documents tab from popstate");const B=document.querySelector('[data-tab="documents"]'),v=document.querySelector('[data-tab-content="documents"]');if(B&&v){Ze.forEach(function(F){F.classList.remove("active")}),tt.forEach(function(F){F.classList.remove("active")}),B.classList.add("active"),v.classList.add("active");const q=v.querySelector("#documents-content");!(q&&q.innerHTML&&!q.innerHTML.includes("Loading")&&!q.innerHTML.includes("Loading documents")&&!q.innerHTML.includes("empty-message"))&&pe&&(console.log("[ProfileTabs] Loading documents for documents tab from popstate"),J(pe),Ie=!0)}return}else if(S==="biography"||!S){const B=document.querySelector('[data-tab="biography"]'),v=document.querySelector('[data-tab-content="biography"]');B&&v&&(Ze.forEach(function(q){q.classList.remove("active")}),tt.forEach(function(q){q.classList.remove("active")}),B.classList.add("active"),v.classList.add("active"))}if(S!=="media"&&S!=="documents")if(A){let B=!1;if(re){if(re.main&&re.main.slug===A)B=!0;else for(let v=0;v<re.chapters.length;v++)if(re.chapters[v].slug===A){B=!0;break}}if(B)console.log("[ProfileTabs] Restoring chapter from popstate:",A),Ue(A,!0);else if(console.log("[ProfileTabs] Chapter",A,"does not belong to current profile, showing default chapter"),re&&re.main){const v=window.location.pathname+"#tab=biography";history.replaceState({tab:"biography"},"",v),Ue(re.main.slug,!0)}}else(!I||I==="#"||I==="#tab=biography"||I==="#tabbiography")&&re&&re.main&&(console.log("[ProfileTabs] No chapter hash, showing introduction"),Ue(re.main.slug,!0));setTimeout(function(){Le=!1},100)};window.addEventListener("popstate",He),ke.push(function(){window.removeEventListener("popstate",He)}),setTimeout(function(){Ke(),setTimeout(function(){const L=window.location.hash;L&&(L.includes("tab=media")||L.includes("tabmedia")||L.includes("tab=documents")||L.includes("tabdocuments"))&&Ke()},300)},500)}ze(),document.addEventListener("nav",function(){ze()})})(),(function(){(function(){function ke(){const re=document.getElementById("all-images-gallery-container");if(!re){console.log("[AllImagesGallery] Container not found");return}const qe=document.querySelector(".all-images-gallery");let Ee=qe&&qe.getAttribute("data-base-path")||"";Ee&&!Ee.endsWith("/")&&(Ee=Ee+"/");const de=qe&&qe.getAttribute("data-family-tree")||"",ze=de!=="";Promise.all([fetch(Ee+"static/media-index.json").then(function(ve){if(!ve.ok)throw new Error("No media index");return ve.json()}),ze?fetch(Ee+"static/family-trees.json").then(function(ve){if(!ve.ok)throw new Error("No family trees index");return ve.json()}):Promise.resolve(null)]).then(function([ve,pe]){let Se=null;if(ze&&pe){let me=de.replace(/-/g,"_");if(console.log("[AllImagesGallery] Looking for family key:",me),console.log("[AllImagesGallery] Available keys:",Object.keys(pe)),me in pe||(me=de.replace(/-/g,"_")+".ged",console.log("[AllImagesGallery] Trying with .ged extension:",me)),me in pe)Se=new Set(pe[me]),console.log("[AllImagesGallery] Found",Se.size,"profiles for family:",me);else{console.warn("[AllImagesGallery] Family tree not found:",de,"tried:",me),re.innerHTML='<div class="empty-message">Family tree not found: '+de+"</div>";return}}console.log("[AllImagesGallery] isFamilyPage:",ze,"profileIdsToInclude:",Se?Se.size:"null");const Ze=[],tt=new Set;let W=0,Ne=0,Ve=0;for(const me in ve.images){if(Se&&!Se.has(me)){W++;continue}Ne++;const ot=ve.images[me]||[];for(const at of ot){let Ue;at.path?Ue=Ee+(at.path.startsWith("/")?at.path.substring(1):at.path):Ue=Ee+"static/documents/"+me+"/"+at.filename;let rt;try{var Ie=decodeURIComponent(Ue);rt=Ie.split("\\").join("/").toLowerCase()}catch{rt=Ue.split("\\").join("/").toLowerCase()}tt.has(rt)?(Ve++,console.log("[AllImagesGallery] Skipping duplicate:",Ue,"from profile:",me)):(tt.add(rt),Ze.push({path:Ue,caption:at.caption||"",filename:at.filename||""}))}}if(console.log("[AllImagesGallery] Found",Ze.length,"images"+(ze?" for family "+de:"")),console.log("[AllImagesGallery] Included profiles:",Ne,"Skipped profiles:",W),Ve>0&&console.log("[AllImagesGallery] Skipped",Ve,"duplicate images"),Ze.length===0){re.innerHTML='<div class="empty-message">No images available</div>';return}re.innerHTML='<div class="gallery-grid" id="all-images-gallery-grid"></div>';const Ke=re.querySelector(".gallery-grid");if(Ke){const me=window.innerWidth;me>1024?Ke.style.setProperty("column-count","4","important"):(me>768,Ke.style.setProperty("column-count","2","important"))}Ze.forEach(function(me){const ot=document.createElement("div");ot.className="gallery-item";const at=me.caption?me.caption.replace(/<[^>]*>/g,""):"";let rt=me.caption?me.caption.split(`
`).join("<br>"):"";var Fe=Ee;if(Fe&&Fe.endsWith("/")&&(Fe=Fe.substring(0,Fe.length-1)),rt&&Fe){var dt=new RegExp('href="(\\/profiles\\/[^"]+)"',"g");rt=rt.replace(dt,function(lt,wt){return'href="'+Fe+wt+'"'})}const bt=document.createElement("img");if(bt.src=me.path,bt.alt=at,ot.appendChild(bt),rt){const lt=document.createElement("div");lt.className="image-caption",lt.innerHTML=rt,ot.appendChild(lt)}ot.addEventListener("click",function(lt){lt.target.tagName.toLowerCase()!=="a"&&window.open(me.path,"_blank")}),Ke.appendChild(ot)});function ut(){const me=document.querySelector("#all-images-gallery-wrapper .gallery-grid")||document.querySelector(".all-images-gallery .gallery-grid");if(me){const ot=window.innerWidth;ot>1024?me.style.setProperty("column-count","4","important"):(ot>768,me.style.setProperty("column-count","2","important"))}}let ht;window.addEventListener("resize",function(){clearTimeout(ht),ht=setTimeout(ut,100)})}).catch(function(ve){console.log("[AllImagesGallery] Error loading images:",ve);const pe=document.getElementById("all-images-gallery-container");pe&&(pe.innerHTML='<div class="empty-message">Error loading images</div>')})}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",ke):ke(),document.addEventListener("nav",ke)})()})(),(function(){var ke=Object.create,re=Object.defineProperty,qe=Object.getOwnPropertyDescriptor,Ee=Object.getOwnPropertyNames,de=Object.getPrototypeOf,ze=Object.prototype.hasOwnProperty,ve=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),pe=(e,t,n,i)=>{if(t&&typeof t=="object"||typeof t=="function")for(let r of Ee(t))!ze.call(e,r)&&r!==n&&re(e,r,{get:()=>t[r],enumerable:!(i=qe(t,r))||i.enumerable});return e},Se=(e,t,n)=>(n=e!=null?ke(de(e)):{},pe(t||!e||!e.__esModule?re(n,"default",{value:e,enumerable:!0}):n,e)),Ze=ve(()=>{}),tt=ve((e,t)=>{"use strict";t.exports=i;function n(o){return o instanceof Buffer?Buffer.from(o):new o.constructor(o.buffer.slice(),o.byteOffset,o.length)}function i(o){if(o=o||{},o.circles)return r(o);let s=new Map;if(s.set(Date,d=>new Date(d)),s.set(Map,(d,C)=>new Map(a(Array.from(d),C))),s.set(Set,(d,C)=>new Set(a(Array.from(d),C))),o.constructorHandlers)for(let d of o.constructorHandlers)s.set(d[0],d[1]);let l=null;return o.proto?m:u;function a(d,C){let h=Object.keys(d),w=new Array(h.length);for(let y=0;y<h.length;y++){let g=h[y],U=d[g];typeof U!="object"||U===null?w[g]=U:U.constructor!==Object&&(l=s.get(U.constructor))?w[g]=l(U,C):ArrayBuffer.isView(U)?w[g]=n(U):w[g]=C(U)}return w}function u(d){if(typeof d!="object"||d===null)return d;if(Array.isArray(d))return a(d,u);if(d.constructor!==Object&&(l=s.get(d.constructor)))return l(d,u);let C={};for(let h in d){if(Object.hasOwnProperty.call(d,h)===!1)continue;let w=d[h];typeof w!="object"||w===null?C[h]=w:w.constructor!==Object&&(l=s.get(w.constructor))?C[h]=l(w,u):ArrayBuffer.isView(w)?C[h]=n(w):C[h]=u(w)}return C}function m(d){if(typeof d!="object"||d===null)return d;if(Array.isArray(d))return a(d,m);if(d.constructor!==Object&&(l=s.get(d.constructor)))return l(d,m);let C={};for(let h in d){let w=d[h];typeof w!="object"||w===null?C[h]=w:w.constructor!==Object&&(l=s.get(w.constructor))?C[h]=l(w,m):ArrayBuffer.isView(w)?C[h]=n(w):C[h]=m(w)}return C}}function r(o){let s=[],l=[],a=new Map;if(a.set(Date,h=>new Date(h)),a.set(Map,(h,w)=>new Map(m(Array.from(h),w))),a.set(Set,(h,w)=>new Set(m(Array.from(h),w))),o.constructorHandlers)for(let h of o.constructorHandlers)a.set(h[0],h[1]);let u=null;return o.proto?C:d;function m(h,w){let y=Object.keys(h),g=new Array(y.length);for(let U=0;U<y.length;U++){let V=y[U],ee=h[V];if(typeof ee!="object"||ee===null)g[V]=ee;else if(ee.constructor!==Object&&(u=a.get(ee.constructor)))g[V]=u(ee,w);else if(ArrayBuffer.isView(ee))g[V]=n(ee);else{let he=s.indexOf(ee);he!==-1?g[V]=l[he]:g[V]=w(ee)}}return g}function d(h){if(typeof h!="object"||h===null)return h;if(Array.isArray(h))return m(h,d);if(h.constructor!==Object&&(u=a.get(h.constructor)))return u(h,d);let w={};s.push(h),l.push(w);for(let y in h){if(Object.hasOwnProperty.call(h,y)===!1)continue;let g=h[y];if(typeof g!="object"||g===null)w[y]=g;else if(g.constructor!==Object&&(u=a.get(g.constructor)))w[y]=u(g,d);else if(ArrayBuffer.isView(g))w[y]=n(g);else{let U=s.indexOf(g);U!==-1?w[y]=l[U]:w[y]=d(g)}}return s.pop(),l.pop(),w}function C(h){if(typeof h!="object"||h===null)return h;if(Array.isArray(h))return m(h,C);if(h.constructor!==Object&&(u=a.get(h.constructor)))return u(h,C);let w={};s.push(h),l.push(w);for(let y in h){let g=h[y];if(typeof g!="object"||g===null)w[y]=g;else if(g.constructor!==Object&&(u=a.get(g.constructor)))w[y]=u(g,C);else if(ArrayBuffer.isView(g))w[y]=n(g);else{let U=s.indexOf(g);U!==-1?w[y]=l[U]:w[y]=C(g)}}return s.pop(),l.pop(),w}}}),W;function Ne(e,t,n){let i=typeof n,r=typeof e;if(i!=="undefined"){if(r!=="undefined"){if(n){if(r==="function"&&i===r)return function(l){return e(n(l))};if(t=e.constructor,t===n.constructor){if(t===Array)return n.concat(e);if(t===Map){var o=new Map(n);for(var s of e)o.set(s[0],s[1]);return o}if(t===Set){s=new Set(n);for(o of e.values())s.add(o);return s}}}return e}return n}return r==="undefined"?t:e}function Ve(e,t){return typeof e>"u"?t:e}function Ie(){return Object.create(null)}function Ke(e){return typeof e=="string"}function ut(e){return typeof e=="object"}function ht(e,t){if(Ke(t))e=e[t];else for(let n=0;e&&n<t.length;n++)e=e[t[n]];return e}var me=/[^\p{L}\p{N}]+/u,ot=/(\d{3})/g,at=/(\D)(\d{3})/g,Ue=/(\d{3})(\D)/g,rt=/[\u0300-\u036f]/g;function Fe(e={}){if(!this||this.constructor!==Fe)return new Fe(...arguments);if(arguments.length)for(e=0;e<arguments.length;e++)this.assign(arguments[e]);else this.assign(e)}W=Fe.prototype,W.assign=function(e){this.normalize=Ne(e.normalize,!0,this.normalize);let t=e.include,n=t||e.exclude||e.split,i;if(n||n===""){if(typeof n=="object"&&n.constructor!==RegExp){let r="";i=!t,t||(r+="\\p{Z}"),n.letter&&(r+="\\p{L}"),n.number&&(r+="\\p{N}",i=!!t),n.symbol&&(r+="\\p{S}"),n.punctuation&&(r+="\\p{P}"),n.control&&(r+="\\p{C}"),(n=n.char)&&(r+=typeof n=="object"?n.join(""):n);try{this.split=new RegExp("["+(t?"^":"")+r+"]+","u")}catch{this.split=/\s+/}}else this.split=n,i=n===!1||"a1a".split(n).length<2;this.numeric=Ne(e.numeric,i)}else{try{this.split=Ne(this.split,me)}catch{this.split=/\s+/}this.numeric=Ne(e.numeric,Ne(this.numeric,!0))}if(this.prepare=Ne(e.prepare,null,this.prepare),this.finalize=Ne(e.finalize,null,this.finalize),n=e.filter,this.filter=typeof n=="function"?n:Ne(n&&new Set(n),null,this.filter),this.dedupe=Ne(e.dedupe,!0,this.dedupe),this.matcher=Ne((n=e.matcher)&&new Map(n),null,this.matcher),this.mapper=Ne((n=e.mapper)&&new Map(n),null,this.mapper),this.stemmer=Ne((n=e.stemmer)&&new Map(n),null,this.stemmer),this.replacer=Ne(e.replacer,null,this.replacer),this.minlength=Ne(e.minlength,1,this.minlength),this.maxlength=Ne(e.maxlength,1024,this.maxlength),this.rtl=Ne(e.rtl,!1,this.rtl),(this.cache=n=Ne(e.cache,!0,this.cache))&&(this.F=null,this.L=typeof n=="number"?n:2e5,this.B=new Map,this.D=new Map,this.I=this.H=128),this.h="",this.J=null,this.A="",this.K=null,this.matcher)for(let r of this.matcher.keys())this.h+=(this.h?"|":"")+r;if(this.stemmer)for(let r of this.stemmer.keys())this.A+=(this.A?"|":"")+r;return this},W.addStemmer=function(e,t){return this.stemmer||(this.stemmer=new Map),this.stemmer.set(e,t),this.A+=(this.A?"|":"")+e,this.K=null,this.cache&&dt(this),this},W.addFilter=function(e){return typeof e=="function"?this.filter=e:(this.filter||(this.filter=new Set),this.filter.add(e)),this.cache&&dt(this),this},W.addMapper=function(e,t){return typeof e=="object"?this.addReplacer(e,t):e.length>1?this.addMatcher(e,t):(this.mapper||(this.mapper=new Map),this.mapper.set(e,t),this.cache&&dt(this),this)},W.addMatcher=function(e,t){return typeof e=="object"?this.addReplacer(e,t):e.length<2&&(this.dedupe||this.mapper)?this.addMapper(e,t):(this.matcher||(this.matcher=new Map),this.matcher.set(e,t),this.h+=(this.h?"|":"")+e,this.J=null,this.cache&&dt(this),this)},W.addReplacer=function(e,t){return typeof e=="string"?this.addMatcher(e,t):(this.replacer||(this.replacer=[]),this.replacer.push(e,t),this.cache&&dt(this),this)},W.encode=function(e,t){if(this.cache&&e.length<=this.H)if(this.F){if(this.B.has(e))return this.B.get(e)}else this.F=setTimeout(dt,50,this);this.normalize&&(typeof this.normalize=="function"?e=this.normalize(e):e=rt?e.normalize("NFKD").replace(rt,"").toLowerCase():e.toLowerCase()),this.prepare&&(e=this.prepare(e)),this.numeric&&e.length>3&&(e=e.replace(at,"$1 $2").replace(Ue,"$1 $2").replace(ot,"$1 "));let n=!(this.dedupe||this.mapper||this.filter||this.matcher||this.stemmer||this.replacer),i=[],r=Ie(),o,s,l=this.split||this.split===""?e.split(this.split):[e];for(let u=0,m,d;u<l.length;u++)if((m=d=l[u])&&!(m.length<this.minlength||m.length>this.maxlength)){if(t){if(r[m])continue;r[m]=1}else{if(o===m)continue;o=m}if(n)i.push(m);else if(!this.filter||(typeof this.filter=="function"?this.filter(m):!this.filter.has(m))){if(this.cache&&m.length<=this.I)if(this.F){var a=this.D.get(m);if(a||a===""){a&&i.push(a);continue}}else this.F=setTimeout(dt,50,this);if(this.stemmer){this.K||(this.K=new RegExp("(?!^)("+this.A+")$"));let C;for(;C!==m&&m.length>2;)C=m,m=m.replace(this.K,h=>this.stemmer.get(h))}if(m&&(this.mapper||this.dedupe&&m.length>1)){a="";for(let C=0,h="",w,y;C<m.length;C++)w=m.charAt(C),w===h&&this.dedupe||((y=this.mapper&&this.mapper.get(w))||y===""?y===h&&this.dedupe||!(h=y)||(a+=y):a+=h=w);m=a}if(this.matcher&&m.length>1&&(this.J||(this.J=new RegExp("("+this.h+")","g")),m=m.replace(this.J,C=>this.matcher.get(C))),m&&this.replacer)for(a=0;m&&a<this.replacer.length;a+=2)m=m.replace(this.replacer[a],this.replacer[a+1]);if(this.cache&&d.length<=this.I&&(this.D.set(d,m),this.D.size>this.L&&(this.D.clear(),this.I=this.I/1.1|0)),m){if(m!==d)if(t){if(r[m])continue;r[m]=1}else{if(s===m)continue;s=m}i.push(m)}}}return this.finalize&&(i=this.finalize(i)||i),this.cache&&e.length<=this.H&&(this.B.set(e,i),this.B.size>this.L&&(this.B.clear(),this.H=this.H/1.1|0)),i};function dt(e){e.F=null,e.B.clear(),e.D.clear()}function bt(e,t,n){n||(t||typeof e!="object"?typeof t=="object"&&(n=t,t=0):n=e),n&&(e=n.query||e,t=n.limit||t);let i=""+(t||0);n&&(i+=(n.offset||0)+!!n.context+!!n.suggest+(n.resolve!==!1)+(n.resolution||this.resolution)+(n.boost||0)),e=(""+e).toLowerCase(),this.cache||(this.cache=new lt);let r=this.cache.get(e+i);if(!r){let o=n&&n.cache;o&&(n.cache=!1),r=this.search(e,t,n),o&&(n.cache=o),this.cache.set(e+i,r)}return r}function lt(e){this.limit=e&&e!==!0?e:1e3,this.cache=new Map,this.h=""}lt.prototype.set=function(e,t){this.cache.set(this.h=e,t),this.cache.size>this.limit&&this.cache.delete(this.cache.keys().next().value)},lt.prototype.get=function(e){let t=this.cache.get(e);return t&&this.h!==e&&(this.cache.delete(e),this.cache.set(this.h=e,t)),t},lt.prototype.remove=function(e){for(let t of this.cache){let n=t[0];t[1].includes(e)&&this.cache.delete(n)}},lt.prototype.clear=function(){this.cache.clear(),this.h=""};var wt={normalize:!1,numeric:!1,dedupe:!1},G={},O=new Map([["b","p"],["v","f"],["w","f"],["z","s"],["x","s"],["d","t"],["n","m"],["c","k"],["g","k"],["j","k"],["q","k"],["i","e"],["y","e"],["u","o"]]),J=new Map([["ae","a"],["oe","o"],["sh","s"],["kh","k"],["th","t"],["ph","f"],["pf","f"]]),xe=[/([^aeo])h(.)/g,"$1$2",/([aeo])h([^aeo]|$)/g,"$1$2",/(.)\1+/g,"$1"],Le={a:"",e:"",i:"",o:"",u:"",y:"",b:1,f:1,p:1,v:1,c:2,g:2,j:2,k:2,q:2,s:2,x:2,z:2,\u00DF:2,d:3,t:3,l:4,m:5,n:5,r:6},He={Exact:wt,Default:G,Normalize:G,LatinBalance:{mapper:O},LatinAdvanced:{mapper:O,matcher:J,replacer:xe},LatinExtra:{mapper:O,replacer:xe.concat([/(?!^)[aeo]/g,""]),matcher:J},LatinSoundex:{dedupe:!1,include:{letter:!0},finalize:function(e){for(let n=0;n<e.length;n++){var t=e[n];let i=t.charAt(0),r=Le[i];for(let o=1,s;o<t.length&&(s=t.charAt(o),s==="h"||s==="w"||!(s=Le[s])||s===r||(i+=s,r=s,i.length!==4));o++);e[n]=i}}},CJK:{split:""},LatinExact:wt,LatinDefault:G,LatinSimple:G};function L(e,t,n,i){let r=[];for(let o=0,s;o<e.index.length;o++)if(s=e.index[o],t>=s.length)t-=s.length;else{t=s[i?"splice":"slice"](t,n);let l=t.length;if(l&&(r=r.length?r.concat(t):t,n-=l,i&&(e.length-=l),!n))break;t=0}return r}function k(e){if(!this||this.constructor!==k)return new k(e);this.index=e?[e]:[],this.length=e?e.length:0;let t=this;return new Proxy([],{get(n,i){if(i==="length")return t.length;if(i==="push")return function(r){t.index[t.index.length-1].push(r),t.length++};if(i==="pop")return function(){if(t.length)return t.length--,t.index[t.index.length-1].pop()};if(i==="indexOf")return function(r){let o=0;for(let s=0,l,a;s<t.index.length;s++){if(l=t.index[s],a=l.indexOf(r),a>=0)return o+a;o+=l.length}return-1};if(i==="includes")return function(r){for(let o=0;o<t.index.length;o++)if(t.index[o].includes(r))return!0;return!1};if(i==="slice")return function(r,o){return L(t,r||0,o||t.length,!1)};if(i==="splice")return function(r,o){return L(t,r||0,o||t.length,!0)};if(i==="constructor")return Array;if(typeof i!="symbol")return(n=t.index[i/2**31|0])&&n[i]},set(n,i,r){return n=i/2**31|0,(t.index[n]||(t.index[n]=[]))[i]=r,t.length++,!0}})}k.prototype.clear=function(){this.index.length=0},k.prototype.push=function(){};function N(e=8){if(!this||this.constructor!==N)return new N(e);this.index=Ie(),this.h=[],this.size=0,e>32?(this.B=A,this.A=BigInt(e)):(this.B=S,this.A=e)}N.prototype.get=function(e){let t=this.index[this.B(e)];return t&&t.get(e)},N.prototype.set=function(e,t){var n=this.B(e);let i=this.index[n];i?(n=i.size,i.set(e,t),(n-=i.size)&&this.size++):(this.index[n]=i=new Map([[e,t]]),this.h.push(i),this.size++)};function I(e=8){if(!this||this.constructor!==I)return new I(e);this.index=Ie(),this.h=[],this.size=0,e>32?(this.B=A,this.A=BigInt(e)):(this.B=S,this.A=e)}I.prototype.add=function(e){var t=this.B(e);let n=this.index[t];n?(t=n.size,n.add(e),(t-=n.size)&&this.size++):(this.index[t]=n=new Set([e]),this.h.push(n),this.size++)},W=N.prototype,W.has=I.prototype.has=function(e){let t=this.index[this.B(e)];return t&&t.has(e)},W.delete=I.prototype.delete=function(e){let t=this.index[this.B(e)];t&&t.delete(e)&&this.size--},W.clear=I.prototype.clear=function(){this.index=Ie(),this.h=[],this.size=0},W.values=I.prototype.values=function*(){for(let e=0;e<this.h.length;e++)for(let t of this.h[e].values())yield t},W.keys=I.prototype.keys=function*(){for(let e=0;e<this.h.length;e++)for(let t of this.h[e].keys())yield t},W.entries=I.prototype.entries=function*(){for(let e=0;e<this.h.length;e++)for(let t of this.h[e].entries())yield t};function S(e){let t=2**this.A-1;if(typeof e=="number")return e&t;let n=0,i=this.A+1;for(let r=0;r<e.length;r++)n=(n*i^e.charCodeAt(r))&t;return this.A===32?n+2**31:n}function A(e){let t=BigInt(2)**this.A-BigInt(1);var n=typeof e;if(n==="bigint")return e&t;if(n==="number")return BigInt(e)&t;n=BigInt(0);let i=this.A+BigInt(1);for(let r=0;r<e.length;r++)n=(n*i^BigInt(e.charCodeAt(r)))&t;return n}var B,v;async function q(e){e=e.data;var t=e.task;let n=e.id,i=e.args;switch(t){case"init":v=e.options||{},(t=e.factory)?(Function("return "+t)()(self),B=new self.FlexSearch.Index(v),delete self.FlexSearch):B=new Ct(v),postMessage({id:n});break;default:let r;t==="export"&&(i[1]?(i[0]=v.export,i[2]=0,i[3]=1):i=null),t==="import"?i[0]&&(e=await v.import.call(B,i[0]),B.import(i[0],e)):((r=i&&B[t].apply(B,i))&&r.then&&(r=await r),r&&r.await&&(r=await r.await),t==="search"&&r.result&&(r=r.result)),postMessage(t==="search"?{id:n,msg:r}:{id:n})}}function ie(e){E.call(e,"add"),E.call(e,"append"),E.call(e,"search"),E.call(e,"update"),E.call(e,"remove"),E.call(e,"searchCache")}var F,X,be;function p(){F=be=0}function E(e){this[e+"Async"]=function(){let t=arguments;var n=t[t.length-1];let i;if(typeof n=="function"&&(i=n,delete t[t.length-1]),F?be||(be=Date.now()-X>=this.priority*this.priority*3):(F=setTimeout(p,0),X=Date.now()),be){let o=this;return new Promise(s=>{setTimeout(function(){s(o[e+"Async"].apply(o,t))},0)})}let r=this[e].apply(this,t);return n=r.then?r:new Promise(o=>o(r)),i&&n.then(i),n}}var M=0;function $(e={},t){function n(l){function a(u){u=u.data||u;let m=u.id,d=m&&o.h[m];d&&(d(u.msg),delete o.h[m])}if(this.worker=l,this.h=Ie(),this.worker)return r?this.worker.on("message",a):this.worker.onmessage=a,e.config?new Promise(function(u){M>1e9&&(M=0),o.h[++M]=function(){u(o)},o.worker.postMessage({id:M,task:"init",factory:i,options:e})}):(this.priority=e.priority||4,this.encoder=t||null,this.worker.postMessage({task:"init",factory:i,options:e}),this)}if(!this||this.constructor!==$)return new $(e);let i=typeof self<"u"?self._factory:typeof window<"u"?window._factory:null;i&&(i=i.toString());let r=typeof window>"u",o=this,s=T(i,r,e.worker);return s.then?s.then(function(l){return n.call(o,l)}):n.call(this,s)}K("add"),K("append"),K("search"),K("update"),K("remove"),K("clear"),K("export"),K("import"),$.prototype.searchCache=bt,ie($.prototype);function K(e){$.prototype[e]=function(){let t=this,n=[].slice.call(arguments);var i=n[n.length-1];let r;return typeof i=="function"&&(r=i,n.pop()),i=new Promise(function(o){e==="export"&&typeof n[0]=="function"&&(n[0]=null),M>1e9&&(M=0),t.h[++M]=o,t.worker.postMessage({task:e,id:M,args:n})}),r?(i.then(r),this):i}}function T(e,t,n){return t?typeof module<"u"?new(Ze()).Worker(__dirname+"/worker/node.js"):Promise.resolve().then(()=>Se(Ze(),1)).then(function(i){return new i.Worker(import.meta.dirname+"/node/node.mjs")}):e?new window.Worker(URL.createObjectURL(new Blob(["onmessage="+q.toString()],{type:"text/javascript"}))):new window.Worker(typeof n=="string"?n:import.meta.url.replace("/worker.js","/worker/worker.js").replace("flexsearch.bundle.module.min.js","module/worker/worker.js").replace("flexsearch.bundle.module.min.mjs","module/worker/worker.js"),{type:"module"})}Je.prototype.add=function(e,t,n){if(ut(e)&&(t=e,e=ht(t,this.key)),t&&(e||e===0)){if(!n&&this.reg.has(e))return this.update(e,t);for(let l=0,a;l<this.field.length;l++){a=this.B[l];var i=this.index.get(this.field[l]);if(typeof a=="function"){var r=a(t);r&&i.add(e,r,n,!0)}else r=a.G,(!r||r(t))&&(a.constructor===String?a=[""+a]:Ke(a)&&(a=[a]),te(t,a,this.D,0,i,e,a[0],n))}if(this.tag)for(i=0;i<this.A.length;i++){var o=this.A[i];r=this.tag.get(this.F[i]);let l=Ie();if(typeof o=="function"){if(o=o(t),!o)continue}else{var s=o.G;if(s&&!s(t))continue;o.constructor===String&&(o=""+o),o=ht(t,o)}if(r&&o){Ke(o)&&(o=[o]);for(let a=0,u,m;a<o.length;a++)if(u=o[a],!l[u]&&(l[u]=1,(s=r.get(u))?m=s:r.set(u,m=[]),!n||!m.includes(e))){if(m.length===2**31-1){if(s=new k(m),this.fastupdate)for(let d of this.reg.values())d.includes(m)&&(d[d.indexOf(m)]=s);r.set(u,m=s)}m.push(e),this.fastupdate&&((s=this.reg.get(e))?s.push(m):this.reg.set(e,[m]))}}}if(this.store&&(!n||!this.store.has(e))){let l;if(this.h){l=Ie();for(let a=0,u;a<this.h.length;a++){if(u=this.h[a],(n=u.G)&&!n(t))continue;let m;if(typeof u=="function"){if(m=u(t),!m)continue;u=[u.O]}else if(Ke(u)||u.constructor===String){l[u]=t[u];continue}R(t,l,u,0,u[0],m)}}this.store.set(e,l||t)}this.worker&&(this.fastupdate||this.reg.add(e))}return this};function R(e,t,n,i,r,o){if(e=e[r],i===n.length-1)t[r]=o||e;else if(e)if(e.constructor===Array)for(t=t[r]=Array(e.length),r=0;r<e.length;r++)R(e,t,n,i,r);else t=t[r]||(t[r]=Ie()),r=n[++i],R(e,t,n,i,r)}function te(e,t,n,i,r,o,s,l){if(e=e[s])if(i===t.length-1){if(e.constructor===Array){if(n[i]){for(t=0;t<e.length;t++)r.add(o,e[t],!0,!0);return}e=e.join(" ")}r.add(o,e,l,!0)}else if(e.constructor===Array)for(s=0;s<e.length;s++)te(e,t,n,i,r,o,s,l);else s=t[++i],te(e,t,n,i,r,o,s,l)}function Te(e,t,n,i){if(!e.length)return e;if(e.length===1)return e=e[0],e=n||e.length>t?e.slice(n,n+t):e,i?Qe.call(this,e):e;let r=[];for(let o=0,s,l;o<e.length;o++)if((s=e[o])&&(l=s.length)){if(n){if(n>=l){n-=l;continue}s=s.slice(n,n+t),l=s.length,n=0}if(l>t&&(s=s.slice(0,t),l=t),!r.length&&l>=t)return i?Qe.call(this,s):s;if(r.push(s),t-=l,!t)break}return r=r.length>1?[].concat.apply([],r):r[0],i?Qe.call(this,r):r}function et(e,t,n,i){var r=i[0];if(r[0]&&r[0].query)return e[t].apply(e,r);if(!(t!=="and"&&t!=="not"||e.result.length||e.await||r.suggest))return i.length>1&&(r=i[i.length-1]),(i=r.resolve)?e.await||e.result:e;let o=[],s=0,l=0,a,u,m,d,C;for(t=0;t<i.length;t++)if(r=i[t]){var h=void 0;if(r.constructor===ne)h=r.await||r.result;else if(r.then||r.constructor===Array)h=r;else{s=r.limit||0,l=r.offset||0,m=r.suggest,u=r.resolve,a=((d=r.highlight||e.highlight)||r.enrich)&&u,h=r.queue;let w=r.async||h,y=r.index,g=r.query;if(y?e.index||(e.index=y):y=e.index,g||r.tag){let U=r.field||r.pluck;if(U&&(!g||e.query&&!d||(e.query=g,e.field=U,e.highlight=d),y=y.index.get(U)),h&&(C||e.await)){C=1;let V,ee=e.C.length,he=new Promise(function(Ae){V=Ae});(function(Ae,Oe){he.h=function(){Oe.index=null,Oe.resolve=!1;let Me=w?Ae.searchAsync(Oe):Ae.search(Oe);return Me.then?Me.then(function(ce){return e.C[ee]=ce=ce.result||ce,V(ce),ce}):(Me=Me.result||Me,V(Me),Me)}})(y,Object.assign({},r)),e.C.push(he),o[t]=he;continue}else r.resolve=!1,r.index=null,h=w?y.searchAsync(r):y.search(r),r.resolve=u,r.index=y}else if(r.and)h=it(r,"and",y);else if(r.or)h=it(r,"or",y);else if(r.not)h=it(r,"not",y);else if(r.xor)h=it(r,"xor",y);else continue}h.await?(C=1,h=h.await):h.then?(C=1,h=h.then(function(w){return w.result||w})):h=h.result||h,o[t]=h}if(C&&!e.await&&(e.await=new Promise(function(w){e.return=w})),C){let w=Promise.all(o).then(function(y){for(let g=0;g<e.C.length;g++)if(e.C[g]===w){e.C[g]=function(){return n.call(e,y,s,l,a,u,m,d)};break}Ye(e)});e.C.push(w)}else if(e.await)e.C.push(function(){return n.call(e,o,s,l,a,u,m,d)});else return n.call(e,o,s,l,a,u,m,d);return u?e.await||e.result:e}function it(e,t,n){e=e[t];let i=e[0]||e;return i.index||(i.index=n),n=new ne(i),e.length>1&&(n=n[t].apply(n,e.slice(1))),n}ne.prototype.or=function(){return et(this,"or",ue,arguments)};function ue(e,t,n,i,r,o,s){return e.length&&(this.result.length&&e.push(this.result),e.length<2?this.result=e[0]:(this.result=$e(e,t,n,!1,this.h),n=0)),r&&(this.await=null),r?this.resolve(t,n,i,s):this}ne.prototype.and=function(){return et(this,"and",_e,arguments)};function _e(e,t,n,i,r,o,s){if(!o&&!this.result.length)return r?this.result:this;let l;if(e.length)if(this.result.length&&e.unshift(this.result),e.length<2)this.result=e[0];else{let a=0;for(let u=0,m,d;u<e.length;u++)if((m=e[u])&&(d=m.length))a<d&&(a=d);else if(!o){a=0;break}a?(this.result=je(e,a,t,n,o,this.h,r),l=!0):this.result=[]}else o||(this.result=e);return r&&(this.await=null),r?this.resolve(t,n,i,s,l):this}ne.prototype.xor=function(){return et(this,"xor",se,arguments)};function se(e,t,n,i,r,o,s){if(e.length)if(this.result.length&&e.unshift(this.result),e.length<2)this.result=e[0];else{e:{o=n;var l=this.h;let a=[],u=Ie(),m=0;for(let d=0,C;d<e.length;d++)if(C=e[d]){m<C.length&&(m=C.length);for(let h=0,w;h<C.length;h++)if(w=C[h])for(let y=0,g;y<w.length;y++)g=w[y],u[g]=u[g]?2:1}for(let d=0,C,h=0;d<m;d++)for(let w=0,y;w<e.length;w++)if((y=e[w])&&(C=y[d])){for(let g=0,U;g<C.length;g++)if(U=C[g],u[U]===1)if(o)o--;else if(r){if(a.push(U),a.length===t){e=a;break e}}else{let V=d+(w?l:0);if(a[V]||(a[V]=[]),a[V].push(U),++h===t){e=a;break e}}}e=a}this.result=e,l=!0}else o||(this.result=e);return r&&(this.await=null),r?this.resolve(t,n,i,s,l):this}ne.prototype.not=function(){return et(this,"not",fe,arguments)};function fe(e,t,n,i,r,o,s){if(!o&&!this.result.length)return r?this.result:this;if(e.length&&this.result.length){e:{o=n;var l=[];e=new Set(e.flat().flat());for(let a=0,u,m=0;a<this.result.length;a++)if(u=this.result[a]){for(let d=0,C;d<u.length;d++)if(C=u[d],!e.has(C)){if(o)o--;else if(r){if(l.push(C),l.length===t){e=l;break e}}else if(l[a]||(l[a]=[]),l[a].push(C),++m===t){e=l;break e}}}e=l}this.result=e,l=!0}return r&&(this.await=null),r?this.resolve(t,n,i,s,l):this}function Ge(e,t,n,i,r){let o,s,l;typeof r=="string"?(o=r,r=""):o=r.template,s=o.indexOf("$1"),l=o.substring(s+2),s=o.substring(0,s);let a=r&&r.boundary,u=!r||r.clip!==!1,m=r&&r.merge&&l&&s&&new RegExp(l+" "+s,"g");r=r&&r.ellipsis;var d=0;if(typeof r=="object"){var C=r.template;d=C.length-2,r=r.pattern}typeof r!="string"&&(r=r===!1?"":"..."),d&&(r=C.replace("$1",r)),C=r.length-d;let h,w;typeof a=="object"&&(h=a.before,h===0&&(h=-1),w=a.after,w===0&&(w=-1),a=a.total||9e5),d=new Map;for(let mt=0,xt,nt,At;mt<t.length;mt++){let Wt;if(i)Wt=t,At=i;else{var y=t[mt];if(At=y.field,!At)continue;Wt=y.result}nt=n.get(At),xt=nt.encoder,y=d.get(xt),typeof y!="string"&&(y=xt.encode(e),d.set(xt,y));for(let Zt=0;Zt<Wt.length;Zt++){var g=Wt[Zt].doc;if(!g||(g=ht(g,At),!g))continue;var U=g.trim().split(/\s+/);if(!U.length)continue;g="";var V=[];let Yt=[];for(var ee=-1,he=-1,Ae=0,Oe=0;Oe<U.length;Oe++){var Me=U[Oe],ce=xt.encode(Me);ce=ce.length>1?ce.join(" "):ce[0];let ge;if(ce&&Me){for(var Pe=Me.length,Z=(xt.split?Me.replace(xt.split,""):Me).length-ce.length,Q="",ye=0,Be=0;Be<y.length;Be++){var We=y[Be];if(We){var De=We.length;De+=Z<0?0:Z,ye&&De<=ye||(We=ce.indexOf(We),We>-1&&(Q=(We?Me.substring(0,We):"")+s+Me.substring(We,We+De)+l+(We+De<Pe?Me.substring(We+De):""),ye=De,ge=!0))}}Q&&(a&&(ee<0&&(ee=g.length+(g?1:0)),he=g.length+(g?1:0)+Q.length,Ae+=Pe,Yt.push(V.length),V.push({match:Q})),g+=(g?" ":"")+Q)}if(!ge)Me=U[Oe],g+=(g?" ":"")+Me,a&&V.push({text:Me});else if(a&&Ae>=a)break}if(Ae=Yt.length*(o.length-2),h||w||a&&g.length-Ae>a)if(Ae=a+Ae-C*2,Oe=he-ee,h>0&&(Oe+=h),w>0&&(Oe+=w),Oe<=Ae)U=h?ee-(h>0?h:0):ee-((Ae-Oe)/2|0),V=w?he+(w>0?w:0):U+Ae,u||(U>0&&g.charAt(U)!==" "&&g.charAt(U-1)!==" "&&(U=g.indexOf(" ",U),U<0&&(U=0)),V<g.length&&g.charAt(V-1)!==" "&&g.charAt(V)!==" "&&(V=g.lastIndexOf(" ",V),V<he?V=he:++V)),g=(U?r:"")+g.substring(U,V)+(V<g.length?r:"");else{for(he=[],ee={},Ae={},Oe={},Me={},ce={},Q=Z=Pe=0,Be=ye=1;;){var we=void 0;for(let ge=0,ft;ge<Yt.length;ge++){if(ft=Yt[ge],Q)if(Z!==Q){if(Oe[ge+1])continue;if(ft+=Q,ee[ft]){Pe-=C,Ae[ge+1]=1,Oe[ge+1]=1;continue}if(ft>=V.length-1){if(ft>=V.length){Oe[ge+1]=1,ft>=U.length&&(Ae[ge+1]=1);continue}Pe-=C}if(g=V[ft].text,De=w&&ce[ge])if(De>0){if(g.length>De)if(Oe[ge+1]=1,u)g=g.substring(0,De);else continue;(De-=g.length)||(De=-1),ce[ge]=De}else{Oe[ge+1]=1;continue}if(Pe+g.length+1<=a)g=" "+g,he[ge]+=g;else if(u)we=a-Pe-1,we>0&&(g=" "+g.substring(0,we),he[ge]+=g),Oe[ge+1]=1;else{Oe[ge+1]=1;continue}}else{if(Oe[ge])continue;if(ft-=Z,ee[ft]){Pe-=C,Oe[ge]=1,Ae[ge]=1;continue}if(ft<=0){if(ft<0){Oe[ge]=1,Ae[ge]=1;continue}Pe-=C}if(g=V[ft].text,De=h&&Me[ge])if(De>0){if(g.length>De)if(Oe[ge]=1,u)g=g.substring(g.length-De);else continue;(De-=g.length)||(De=-1),Me[ge]=De}else{Oe[ge]=1;continue}if(Pe+g.length+1<=a)g+=" ",he[ge]=g+he[ge];else if(u)we=g.length+1-(a-Pe),we>=0&&we<g.length&&(g=g.substring(we)+" ",he[ge]=g+he[ge]),Oe[ge]=1;else{Oe[ge]=1;continue}}else{g=V[ft].match,h&&(Me[ge]=h),w&&(ce[ge]=w),ge&&Pe++;let dn;if(ft?!ge&&C&&(Pe+=C):(Ae[ge]=1,Oe[ge]=1),ft>=U.length-1||ft<V.length-1&&V[ft+1].match?dn=1:C&&(Pe+=C),Pe-=o.length-2,!ge||Pe+g.length<=a)he[ge]=g;else{we=ye=Be=Ae[ge]=0;break}dn&&(Ae[ge+1]=1,Oe[ge+1]=1)}Pe+=g.length,we=ee[ft]=1}if(we)Z===Q?Q++:Z++;else{if(Z===Q?ye=0:Be=0,!ye&&!Be)break;ye?(Z++,Q=Z):Q++}}g="";for(let ge=0,ft;ge<he.length;ge++)ft=(Ae[ge]?ge?" ":"":(ge&&!r?" ":"")+r)+he[ge],g+=ft;r&&!Ae[he.length]&&(g+=r)}m&&(g=g.replace(m," ")),Wt[Zt].highlight=g}if(i)break}return t}function ne(e,t){if(!this||this.constructor!==ne)return new ne(e,t);let n=0,i,r,o,s,l,a;if(e&&e.index){let u=e;if(t=u.index,n=u.boost||0,r=u.query){o=u.field||u.pluck,s=u.highlight;let m=u.resolve;e=u.async||u.queue,u.resolve=!1,u.index=null,e=e?t.searchAsync(u):t.search(u),u.resolve=m,u.index=t,e=e.result||e}else e=[]}if(e&&e.then){let u=this;e=e.then(function(m){u.C[0]=u.result=m.result||m,Ye(u)}),i=[e],e=[],l=new Promise(function(m){a=m})}this.index=t||null,this.result=e||[],this.h=n,this.C=i||[],this.await=l||null,this.return=a||null,this.highlight=s||null,this.query=r||"",this.field=o||""}W=ne.prototype,W.limit=function(e){if(this.await){let t=this;this.C.push(function(){return t.limit(e).result})}else if(this.result.length){let t=[];for(let n=0,i;n<this.result.length;n++)if(i=this.result[n])if(i.length<=e){if(t[n]=i,e-=i.length,!e)break}else{t[n]=i.slice(0,e);break}this.result=t}return this},W.offset=function(e){if(this.await){let t=this;this.C.push(function(){return t.offset(e).result})}else if(this.result.length){let t=[];for(let n=0,i;n<this.result.length;n++)(i=this.result[n])&&(i.length<=e?e-=i.length:(t[n]=i.slice(e),e=0));this.result=t}return this},W.boost=function(e){if(this.await){let t=this;this.C.push(function(){return t.boost(e).result})}else this.h+=e;return this};function Ye(e,t){let n=e.result;var i=e.await;e.await=null;for(let r=0,o;r<e.C.length;r++)if(o=e.C[r]){if(typeof o=="function")n=o(),e.C[r]=n=n.result||n,r--;else if(o.h)n=o.h(),e.C[r]=n=n.result||n,r--;else if(o.then)return e.await=i}return i=e.return,e.C=[],e.return=null,t||i(n),n}W.resolve=function(e,t,n,i,r){let o=this.await?Ye(this,!0):this.result;if(o.then){let s=this;return o.then(function(){return s.resolve(e,t,n,i,r)})}return o.length&&(typeof e=="object"?(i=e.highlight||this.highlight,n=!!i||e.enrich,t=e.offset,e=e.limit):(i=i||this.highlight,n=!!i||n),o=r?n?Qe.call(this.index,o):o:Te.call(this.index,o,e||100,t,n)),this.finalize(o,i)},W.finalize=function(e,t){if(e.then){let i=this;return e.then(function(r){return i.finalize(r,t)})}t&&e.length&&this.query&&(e=Ge(this.query,e,this.index.index,this.field,t));let n=this.return;return this.highlight=this.index=this.result=this.C=this.await=this.return=null,this.query=this.field="",n&&n(e),e};function je(e,t,n,i,r,o,s){let l=e.length,a=[],u,m;u=Ie();for(let d=0,C,h,w,y;d<t;d++)for(let g=0;g<l;g++)if(w=e[g],d<w.length&&(C=w[d]))for(let U=0;U<C.length;U++){if(h=C[U],(m=u[h])?u[h]++:(m=0,u[h]=1),y=a[m]||(a[m]=[]),!s){let V=d+(g||!r?0:o||0);y=y[V]||(y[V]=[])}if(y.push(h),s&&n&&m===l-1&&y.length-i===n)return i?y.slice(i):y}if(e=a.length)if(r)a=a.length>1?$e(a,n,i,s,o):(a=a[0])&&n&&a.length>n||i?a.slice(i,n+i):a;else{if(e<l)return[];if(a=a[e-1],n||i)if(s)(a.length>n||i)&&(a=a.slice(i,n+i));else{r=[];for(let d=0,C;d<a.length;d++)if(C=a[d]){if(i&&C.length>i)i-=C.length;else if((n&&C.length>n||i)&&(C=C.slice(i,n+i),n-=C.length,i&&(i-=C.length)),r.push(C),!n)break}a=r}}return a}function $e(e,t,n,i,r){let o=[],s=Ie(),l;var a=e.length;let u;if(i){for(r=a-1;r>=0;r--)if(u=(i=e[r])&&i.length){for(a=0;a<u;a++)if(l=i[a],!s[l]){if(s[l]=1,n)n--;else if(o.push(l),o.length===t)return o}}}else for(let m=a-1,d,C=0;m>=0;m--){d=e[m];for(let h=0;h<d.length;h++)if(u=(i=d[h])&&i.length){for(let w=0;w<u;w++)if(l=i[w],!s[l])if(s[l]=1,n)n--;else{let y=(h+(m<a-1&&r||0))/(m+1)|0;if((o[y]||(o[y]=[])).push(l),++C===t)return o}}}return o}function Ce(e,t,n,i,r){let o=Ie(),s=[];for(let l=0,a;l<t.length;l++){a=t[l];for(let u=0;u<a.length;u++)o[a[u]]=1}if(r){for(let l=0,a;l<e.length;l++)if(a=e[l],o[a]){if(i)i--;else if(s.push(a),o[a]=0,n&&--n===0)break}}else for(let l=0,a,u;l<e.result.length;l++)for(a=e.result[l],t=0;t<a.length;t++)u=a[t],o[u]&&((s[l]||(s[l]=[])).push(u),o[u]=0);return s}Ie(),Je.prototype.search=function(e,t,n,i){n||(!t&&ut(e)?(n=e,e=""):ut(t)&&(n=t,t=0));let r=[];var o=[];let s,l,a,u,m,d,C=0,h=!0,w;if(n){n.constructor===Array&&(n={index:n}),e=n.query||e,s=n.pluck,l=n.merge,u=n.boost,d=s||n.field||(d=n.index)&&(d.index?null:d);var y=this.tag&&n.tag;a=n.suggest,h=n.resolve!==!1,m=n.cache,w=h&&this.store&&n.highlight;var g=!!w||h&&this.store&&n.enrich;t=n.limit||t;var U=n.offset||0;if(t||(t=h?100:0),y&&(!this.db||!i)){y.constructor!==Array&&(y=[y]);var V=[];for(let Me=0,ce;Me<y.length;Me++)if(ce=y[Me],ce.field&&ce.tag){var ee=ce.tag;if(ee.constructor===Array)for(var he=0;he<ee.length;he++)V.push(ce.field,ee[he]);else V.push(ce.field,ee)}else{ee=Object.keys(ce);for(let Pe=0,Z,Q;Pe<ee.length;Pe++)if(Z=ee[Pe],Q=ce[Z],Q.constructor===Array)for(he=0;he<Q.length;he++)V.push(Z,Q[he]);else V.push(Z,Q)}if(y=V,!e){if(o=[],V.length)for(y=0;y<V.length;y+=2){if(this.db){if(i=this.index.get(V[y]),!i)continue;o.push(i=i.db.tag(V[y+1],t,U,g))}else i=vt.call(this,V[y],V[y+1],t,U,g);r.push(h?{field:V[y],tag:V[y+1],result:i}:[i])}if(o.length){let Me=this;return Promise.all(o).then(function(ce){for(let Pe=0;Pe<ce.length;Pe++)h?r[Pe].result=ce[Pe]:r[Pe]=ce[Pe];return h?r:new ne(r.length>1?je(r,1,0,0,a,u):r[0],Me)})}return h?r:new ne(r.length>1?je(r,1,0,0,a,u):r[0],this)}}h||s||!(d=d||this.field)||(Ke(d)?s=d:(d.constructor===Array&&d.length===1&&(d=d[0]),s=d.field||d.index)),d&&d.constructor!==Array&&(d=[d])}d||(d=this.field);let Ae;V=(this.worker||this.db)&&!i&&[];for(let Me=0,ce,Pe,Z;Me<d.length;Me++){if(Pe=d[Me],this.db&&this.tag&&!this.B[Me])continue;let Q;if(Ke(Pe)||(Q=Pe,Pe=Q.field,e=Q.query||e,t=Ve(Q.limit,t),U=Ve(Q.offset,U),a=Ve(Q.suggest,a),w=h&&this.store&&Ve(Q.highlight,w),g=!!w||h&&this.store&&Ve(Q.enrich,g),m=Ve(Q.cache,m)),i)ce=i[Me];else{ee=Q||n||{},he=ee.enrich;var Oe=this.index.get(Pe);if(y&&(this.db&&(ee.tag=y,ee.field=d,Ae=Oe.db.support_tag_search),!Ae&&he&&(ee.enrich=!1),Ae||(ee.limit=0,ee.offset=0)),ce=m?Oe.searchCache(e,y&&!Ae?0:t,ee):Oe.search(e,y&&!Ae?0:t,ee),y&&!Ae&&(ee.limit=t,ee.offset=U),he&&(ee.enrich=he),V){V[Me]=ce;continue}}if(Z=(ce=ce.result||ce)&&ce.length,y&&Z){if(ee=[],he=0,this.db&&i){if(!Ae)for(Oe=d.length;Oe<i.length;Oe++){let ye=i[Oe];if(ye&&ye.length)he++,ee.push(ye);else if(!a)return h?r:new ne(r,this)}}else for(let ye=0,Be,We;ye<y.length;ye+=2){if(Be=this.tag.get(y[ye]),!Be){if(a)continue;return h?r:new ne(r,this)}if(We=(Be=Be&&Be.get(y[ye+1]))&&Be.length)he++,ee.push(Be);else if(!a)return h?r:new ne(r,this)}if(he){if(ce=Ce(ce,ee,t,U,h),Z=ce.length,!Z&&!a)return h?ce:new ne(ce,this);he--}}if(Z)o[C]=Pe,r.push(ce),C++;else if(d.length===1)return h?r:new ne(r,this)}if(V){if(this.db&&y&&y.length&&!Ae)for(g=0;g<y.length;g+=2){if(o=this.index.get(y[g]),!o){if(a)continue;return h?r:new ne(r,this)}V.push(o.db.tag(y[g+1],t,U,!1))}let Me=this;return Promise.all(V).then(function(ce){return n&&(n.resolve=h),ce.length&&(ce=Me.search(e,t,n,ce)),ce})}if(!C)return h?r:new ne(r,this);if(s&&(!g||!this.store))return r=r[0],h?r:new ne(r,this);for(V=[],U=0;U<o.length;U++){if(y=r[U],g&&y.length&&typeof y[0].doc>"u"&&(this.db?V.push(y=this.index.get(this.field[0]).db.enrich(y)):y=Qe.call(this,y)),s)return h?w?Ge(e,y,this.index,s,w):y:new ne(y,this);r[U]={field:o[U],result:y}}if(g&&this.db&&V.length){let Me=this;return Promise.all(V).then(function(ce){for(let Pe=0;Pe<ce.length;Pe++)r[Pe].result=ce[Pe];return w&&(r=Ge(e,r,Me.index,s,w)),l?Xe(r):r})}return w&&(r=Ge(e,r,this.index,s,w)),l?Xe(r):r};function Xe(e){let t=[],n=Ie(),i=Ie();for(let r=0,o,s,l,a,u,m,d;r<e.length;r++){o=e[r],s=o.field,l=o.result;for(let C=0;C<l.length;C++)u=l[C],typeof u!="object"?u={id:a=u}:a=u.id,(m=n[a])?m.push(s):(u.field=n[a]=[s],t.push(u)),(d=u.highlight)&&(m=i[a],m||(i[a]=m={},u.highlight=m),m[s]=d)}return t}function vt(e,t,n,i,r){return e=this.tag.get(e),e?(e=e.get(t),e?(t=e.length-i,t>0&&((n&&t>n||i)&&(e=e.slice(i,i+n)),r&&(e=Qe.call(this,e))),e):[]):[]}function Qe(e){if(!this||!this.store)return e;if(this.db)return this.index.get(this.field[0]).db.enrich(e);let t=Array(e.length);for(let n=0,i;n<e.length;n++)i=e[n],t[n]={id:i,doc:this.store.get(i)};return t}function Je(e){if(!this||this.constructor!==Je)return new Je(e);let t=e.document||e.doc||e,n,i;if(this.B=[],this.field=[],this.D=[],this.key=(n=t.key||t.id)&&Re(n,this.D)||"id",(i=e.keystore||0)&&(this.keystore=i),this.fastupdate=!!e.fastupdate,this.reg=!this.fastupdate||e.worker||e.db?i?new I(i):new Set:i?new N(i):new Map,this.h=(n=t.store||null)&&n&&n!==!0&&[],this.store=n?i?new N(i):new Map:null,this.cache=(n=e.cache||null)&&new lt(n),e.cache=!1,this.worker=e.worker||!1,this.priority=e.priority||4,this.index=st.call(this,e,t),this.tag=null,(n=t.tag)&&(typeof n=="string"&&(n=[n]),n.length)){this.tag=new Map,this.A=[],this.F=[];for(let r=0,o,s;r<n.length;r++){if(o=n[r],s=o.field||o,!s)throw Error("The tag field from the document descriptor is undefined.");o.custom?this.A[r]=o.custom:(this.A[r]=Re(s,this.D),o.filter&&(typeof this.A[r]=="string"&&(this.A[r]=new String(this.A[r])),this.A[r].G=o.filter)),this.F[r]=s,this.tag.set(s,new Map)}}if(this.worker){this.fastupdate=!1,e=[];for(let r of this.index.values())r.then&&e.push(r);if(e.length){let r=this;return Promise.all(e).then(function(o){let s=0;for(let l of r.index.entries()){let a=l[0],u=l[1];u.then&&(u=o[s],r.index.set(a,u),s++)}return r})}}else e.db&&(this.fastupdate=!1,this.mount(e.db))}W=Je.prototype,W.mount=function(e){let t=this.field;if(this.tag)for(let o=0,s;o<this.F.length;o++){s=this.F[o];var n=void 0;this.index.set(s,n=new Ct({},this.reg)),t===this.field&&(t=t.slice(0)),t.push(s),n.tag=this.tag.get(s)}n=[];let i={db:e.db,type:e.type,fastupdate:e.fastupdate};for(let o=0,s,l;o<t.length;o++){i.field=l=t[o],s=this.index.get(l);let a=new e.constructor(e.id,i);a.id=e.id,n[o]=a.mount(s),s.document=!0,o?s.bypass=!0:s.store=this.store}let r=this;return this.db=Promise.all(n).then(function(){r.db=!0})},W.commit=async function(){let e=[];for(let t of this.index.values())e.push(t.commit());await Promise.all(e),this.reg.clear()},W.destroy=function(){let e=[];for(let t of this.index.values())e.push(t.destroy());return Promise.all(e)};function st(e,t){let n=new Map,i=t.index||t.field||t;Ke(i)&&(i=[i]);for(let o=0,s,l;o<i.length;o++){if(s=i[o],Ke(s)||(l=s,s=s.field),l=ut(l)?Object.assign({},e,l):e,this.worker){var r=void 0;r=(r=l.encoder)&&r.encode?r:new Fe(typeof r=="string"?He[r]:r||{}),r=new $(l,r),n.set(s,r)}this.worker||n.set(s,new Ct(l,this.reg)),l.custom?this.B[o]=l.custom:(this.B[o]=Re(s,this.D),l.filter&&(typeof this.B[o]=="string"&&(this.B[o]=new String(this.B[o])),this.B[o].G=l.filter)),this.field[o]=s}if(this.h){e=t.store,Ke(e)&&(e=[e]);for(let o=0,s,l;o<e.length;o++)s=e[o],l=s.field||s,s.custom?(this.h[o]=s.custom,s.custom.O=l):(this.h[o]=Re(l,this.D),s.filter&&(typeof this.h[o]=="string"&&(this.h[o]=new String(this.h[o])),this.h[o].G=s.filter))}return n}function Re(e,t){let n=e.split(":"),i=0;for(let r=0;r<n.length;r++)e=n[r],e[e.length-1]==="]"&&(e=e.substring(0,e.length-2))&&(t[i]=!0),e&&(n[i++]=e);return i<n.length&&(n.length=i),i>1?n:n[0]}W.append=function(e,t){return this.add(e,t,!0)},W.update=function(e,t){return this.remove(e).add(e,t)},W.remove=function(e){ut(e)&&(e=ht(e,this.key));for(var t of this.index.values())t.remove(e,!0);if(this.reg.has(e)){if(this.tag&&!this.fastupdate)for(let n of this.tag.values())for(let i of n){t=i[0];let r=i[1],o=r.indexOf(e);o>-1&&(r.length>1?r.splice(o,1):n.delete(t))}this.store&&this.store.delete(e),this.reg.delete(e)}return this.cache&&this.cache.remove(e),this},W.clear=function(){let e=[];for(let t of this.index.values()){let n=t.clear();n.then&&e.push(n)}if(this.tag)for(let t of this.tag.values())t.clear();return this.store&&this.store.clear(),this.cache&&this.cache.clear(),e.length?Promise.all(e):this},W.contain=function(e){return this.db?this.index.get(this.field[0]).db.has(e):this.reg.has(e)},W.cleanup=function(){for(let e of this.index.values())e.cleanup();return this},W.get=function(e){return this.db?this.index.get(this.field[0]).db.enrich(e).then(function(t){return t[0]&&t[0].doc||null}):this.store.get(e)||null},W.set=function(e,t){return typeof e=="object"&&(t=e,e=ht(t,this.key)),this.store.set(e,t),this},W.searchCache=bt,W.export=qt,W.import=Dt,ie(Je.prototype);function ct(e,t=0){let n=[],i=[];t&&(t=25e4/t*5e3|0);for(let r of e.entries())i.push(r),i.length===t&&(n.push(i),i=[]);return i.length&&n.push(i),n}function pt(e,t){t||(t=new Map);for(let n=0,i;n<e.length;n++)i=e[n],t.set(i[0],i[1]);return t}function yt(e,t=0){let n=[],i=[];t&&(t=25e4/t*1e3|0);for(let r of e.entries())i.push([r[0],ct(r[1])[0]||[]]),i.length===t&&(n.push(i),i=[]);return i.length&&n.push(i),n}function jt(e,t){t||(t=new Map);for(let n=0,i,r;n<e.length;n++)i=e[n],r=t.get(i[0]),t.set(i[0],pt(i[1],r));return t}function Ot(e){let t=[],n=[];for(let i of e.keys())n.push(i),n.length===25e4&&(t.push(n),n=[]);return n.length&&t.push(n),t}function Bt(e,t){t||(t=new Set);for(let n=0;n<e.length;n++)t.add(e[n]);return t}function St(e,t,n,i,r,o,s=0){let l=i&&i.constructor===Array;var a=l?i.shift():i;if(!a)return this.export(e,t,r,o+1);if((a=e((t?t+".":"")+(s+1)+"."+n,JSON.stringify(a)))&&a.then){let u=this;return a.then(function(){return St.call(u,e,t,n,l?i:null,r,o,s+1)})}return St.call(this,e,t,n,l?i:null,r,o,s+1)}function qt(e,t,n=0,i=0){if(n<this.field.length){let s=this.field[n];if((t=this.index.get(s).export(e,s,n,i=1))&&t.then){let l=this;return t.then(function(){return l.export(e,s,n+1)})}return this.export(e,s,n+1)}let r,o;switch(i){case 0:r="reg",o=Ot(this.reg),t=null;break;case 1:r="tag",o=this.tag&&yt(this.tag,this.reg.size),t=null;break;case 2:r="doc",o=this.store&&ct(this.store),t=null;break;default:return}return St.call(this,e,t,r,o||null,n,i)}function Dt(e,t){var n=e.split(".");n[n.length-1]==="json"&&n.pop();let i=n.length>2?n[0]:"";if(n=n.length>2?n[2]:n[1],this.worker&&i)return this.index.get(i).import(e);if(t){if(typeof t=="string"&&(t=JSON.parse(t)),i)return this.index.get(i).import(n,t);switch(n){case"reg":this.fastupdate=!1,this.reg=Bt(t,this.reg);for(let r=0,o;r<this.field.length;r++)o=this.index.get(this.field[r]),o.fastupdate=!1,o.reg=this.reg;if(this.worker){t=[];for(let r of this.index.values())t.push(r.import(e));return Promise.all(t)}break;case"tag":this.tag=jt(t,this.tag);break;case"doc":this.store=pt(t,this.store)}}}function zt(e,t){let n="";for(let i of e.entries()){e=i[0];let r=i[1],o="";for(let s=0,l;s<r.length;s++){l=r[s]||[""];let a="";for(let u=0;u<l.length;u++)a+=(a?",":"")+(t==="string"?'"'+l[u]+'"':l[u]);a="["+a+"]",o+=(o?",":"")+a}o='["'+e+'",['+o+"]]",n+=(n?",":"")+o}return n}Ct.prototype.remove=function(e,t){let n=this.reg.size&&(this.fastupdate?this.reg.get(e):this.reg.has(e));if(n){if(this.fastupdate){for(let i=0,r,o;i<n.length;i++)if((r=n[i])&&(o=r.length))if(r[o-1]===e)r.pop();else{let s=r.indexOf(e);s>=0&&r.splice(s,1)}}else Pt(this.map,e),this.depth&&Pt(this.ctx,e);t||this.reg.delete(e)}return this.db&&(this.commit_task.push({del:e}),this.M&&Ut(this)),this.cache&&this.cache.remove(e),this};function Pt(e,t){let n=0;var i=typeof t>"u";if(e.constructor===Array){for(let r=0,o,s,l;r<e.length;r++)if((o=e[r])&&o.length){if(i)return 1;if(s=o.indexOf(t),s>=0){if(o.length>1)return o.splice(s,1),1;if(delete e[r],n)return 1;l=1}else{if(l)return 1;n++}}}else for(let r of e.entries())i=r[0],Pt(r[1],t)?n++:e.delete(i);return n}var Qt={memory:{resolution:1},performance:{resolution:3,fastupdate:!0,context:{depth:1,resolution:1}},match:{tokenize:"forward"},score:{resolution:9,context:{depth:2,resolution:3}}};Ct.prototype.add=function(e,t,n,i){if(t&&(e||e===0)){if(!i&&!n&&this.reg.has(e))return this.update(e,t);i=this.depth,t=this.encoder.encode(t,!i);let u=t.length;if(u){let m=Ie(),d=Ie(),C=this.resolution;for(let h=0;h<u;h++){let w=t[this.rtl?u-1-h:h];var r=w.length;if(r&&(i||!d[w])){var o=this.score?this.score(t,w,h,null,0):Nt(C,u,h),s="";switch(this.tokenize){case"tolerant":if(Lt(this,d,w,o,e,n),r>2){for(let y=1,g,U,V,ee;y<r-1;y++)g=w.charAt(y),U=w.charAt(y+1),V=w.substring(0,y)+U,ee=w.substring(y+2),s=V+g+ee,Lt(this,d,s,o,e,n),s=V+ee,Lt(this,d,s,o,e,n);Lt(this,d,w.substring(0,w.length-1),o,e,n)}break;case"full":if(r>2){for(let y=0,g;y<r;y++)for(o=r;o>y;o--){s=w.substring(y,o),g=this.rtl?r-1-y:y;var l=this.score?this.score(t,w,h,s,g):Nt(C,u,h,r,g);Lt(this,d,s,l,e,n)}break}case"bidirectional":case"reverse":if(r>1){for(l=r-1;l>0;l--){s=w[this.rtl?r-1-l:l]+s;var a=this.score?this.score(t,w,h,s,l):Nt(C,u,h,r,l);Lt(this,d,s,a,e,n)}s=""}case"forward":if(r>1){for(l=0;l<r;l++)s+=w[this.rtl?r-1-l:l],Lt(this,d,s,o,e,n);break}default:if(Lt(this,d,w,o,e,n),i&&u>1&&h<u-1)for(r=this.N,s=w,o=Math.min(i+1,this.rtl?h+1:u-h),l=1;l<o;l++){w=t[this.rtl?u-1-h-l:h+l],a=this.bidirectional&&w>s;let y=this.score?this.score(t,s,h,w,l-1):Nt(r+(u/2>r?0:1),u,h,o-1,l-1);Lt(this,m,a?s:w,y,e,n,a?w:s)}}}}this.fastupdate||this.reg.add(e)}}return this.db&&(this.commit_task.push(n?{ins:e}:{del:e}),this.M&&Ut(this)),this};function Lt(e,t,n,i,r,o,s){let l,a;if(!(l=t[n])||s&&!l[s]){if(s?(t=l||(t[n]=Ie()),t[s]=1,a=e.ctx,(l=a.get(s))?a=l:a.set(s,a=e.keystore?new N(e.keystore):new Map)):(a=e.map,t[n]=1),(l=a.get(n))?a=l:a.set(n,a=l=[]),o){for(let u=0,m;u<l.length;u++)if((m=l[u])&&m.includes(r)){if(u<=i)return;m.splice(m.indexOf(r),1),e.fastupdate&&(t=e.reg.get(r))&&t.splice(t.indexOf(m),1);break}}if(a=a[i]||(a[i]=[]),a.push(r),a.length===2**31-1){if(t=new k(a),e.fastupdate)for(let u of e.reg.values())u.includes(a)&&(u[u.indexOf(a)]=t);l[i]=a=t}e.fastupdate&&((i=e.reg.get(r))?i.push(a):e.reg.set(r,[a]))}}function Nt(e,t,n,i,r){return n&&e>1?t+(i||0)<=e?n+(r||0):(e-1)/(t+(i||0))*(n+(r||0))+1|0:0}Ct.prototype.search=function(e,t,n){if(n||(t||typeof e!="object"?typeof t=="object"&&(n=t,t=0):(n=e,e="")),n&&n.cache)return n.cache=!1,e=this.searchCache(e,t,n),n.cache=!0,e;let i=[],r,o,s,l=0,a,u,m,d,C;n&&(e=n.query||e,t=n.limit||t,l=n.offset||0,o=n.context,s=n.suggest,C=(a=n.resolve)&&n.enrich,m=n.boost,d=n.resolution,u=this.db&&n.tag),typeof a>"u"&&(a=this.resolve),o=this.depth&&o!==!1;let h=this.encoder.encode(e,!o);if(r=h.length,t=t||(a?100:0),r===1)return Kt.call(this,h[0],"",t,l,a,C,u);if(r===2&&o&&!s)return Kt.call(this,h[1],h[0],t,l,a,C,u);let w=Ie(),y=0,g;if(o&&(g=h[0],y=1),d||d===0||(d=g?this.N:this.resolution),this.db){if(this.db.search&&(n=this.db.search(this,h,t,l,s,a,C,u),n!==!1))return n;let U=this;return(async function(){for(let V,ee;y<r;y++){if((ee=h[y])&&!w[ee]){if(w[ee]=1,V=await Ht(U,ee,g,0,0,!1,!1),V=Ft(V,i,s,d)){i=V;break}g&&(s&&V&&i.length||(g=ee))}s&&g&&y===r-1&&!i.length&&(d=U.resolution,g="",y=-1,w=Ie())}return Vt(i,d,t,l,s,m,a)})()}for(let U,V;y<r;y++){if((V=h[y])&&!w[V]){if(w[V]=1,U=Ht(this,V,g,0,0,!1,!1),U=Ft(U,i,s,d)){i=U;break}g&&(s&&U&&i.length||(g=V))}s&&g&&y===r-1&&!i.length&&(d=this.resolution,g="",y=-1,w=Ie())}return Vt(i,d,t,l,s,m,a)};function Vt(e,t,n,i,r,o,s){let l=e.length,a=e;if(l>1)a=je(e,t,n,i,r,o,s);else if(l===1)return s?Te.call(null,e[0],n,i):new ne(e[0],this);return s?a:new ne(a,this)}function Kt(e,t,n,i,r,o,s){return e=Ht(this,e,t,n,i,r,o,s),this.db?e.then(function(l){return r?l||[]:new ne(l,this)}):e&&e.length?r?Te.call(this,e,n,i):new ne(e,this):r?[]:new ne([],this)}function Ft(e,t,n,i){let r=[];if(e&&e.length){if(e.length<=i){t.push(e);return}for(let o=0,s;o<i;o++)(s=e[o])&&(r[o]=s);if(r.length){t.push(r);return}}if(!n)return r}function Ht(e,t,n,i,r,o,s,l){let a;return n&&(a=e.bidirectional&&t>n)&&(a=n,n=t,t=a),e.db?e.db.get(t,n,i,r,o,s,l):(e=n?(e=e.ctx.get(n))&&e.get(t):e.map.get(t),e)}function Ct(e,t){if(!this||this.constructor!==Ct)return new Ct(e);if(e){var n=Ke(e)?e:e.preset;n&&(e=Object.assign({},Qt[n],e))}else e={};n=e.context;let i=n===!0?{depth:1}:n||{},r=Ke(e.encoder)?He[e.encoder]:e.encode||e.encoder||{};this.encoder=r.encode?r:typeof r=="object"?new Fe(r):{encode:r},this.resolution=e.resolution||9,this.tokenize=n=(n=e.tokenize)&&n!=="default"&&n!=="exact"&&n||"strict",this.depth=n==="strict"&&i.depth||0,this.bidirectional=i.bidirectional!==!1,this.fastupdate=!!e.fastupdate,this.score=e.score||null,(n=e.keystore||0)&&(this.keystore=n),this.map=n?new N(n):new Map,this.ctx=n?new N(n):new Map,this.reg=t||(this.fastupdate?n?new N(n):new Map:n?new I(n):new Set),this.N=i.resolution||3,this.rtl=r.rtl||e.rtl||!1,this.cache=(n=e.cache||null)&&new lt(n),this.resolve=e.resolve!==!1,(n=e.db)&&(this.db=this.mount(n)),this.M=e.commit!==!1,this.commit_task=[],this.commit_timer=null,this.priority=e.priority||4}W=Ct.prototype,W.mount=function(e){return this.commit_timer&&(clearTimeout(this.commit_timer),this.commit_timer=null),e.mount(this)},W.commit=function(){return this.commit_timer&&(clearTimeout(this.commit_timer),this.commit_timer=null),this.db.commit(this)},W.destroy=function(){return this.commit_timer&&(clearTimeout(this.commit_timer),this.commit_timer=null),this.db.destroy()};function Ut(e){e.commit_timer||(e.commit_timer=setTimeout(function(){e.commit_timer=null,e.db.commit(e)},1))}W.clear=function(){return this.map.clear(),this.ctx.clear(),this.reg.clear(),this.cache&&this.cache.clear(),this.db?(this.commit_timer&&clearTimeout(this.commit_timer),this.commit_timer=null,this.commit_task=[],this.db.clear()):this},W.append=function(e,t){return this.add(e,t,!0)},W.contain=function(e){return this.db?this.db.has(e):this.reg.has(e)},W.update=function(e,t){let n=this,i=this.remove(e);return i&&i.then?i.then(()=>n.add(e,t)):this.add(e,t)},W.cleanup=function(){return this.fastupdate?(Pt(this.map),this.depth&&Pt(this.ctx),this):this},W.searchCache=bt,W.export=function(e,t,n=0,i=0){let r,o;switch(i){case 0:r="reg",o=Ot(this.reg);break;case 1:r="cfg",o=null;break;case 2:r="map",o=ct(this.map,this.reg.size);break;case 3:r="ctx",o=yt(this.ctx,this.reg.size);break;default:return}return St.call(this,e,t,r,o,n,i)},W.import=function(e,t){if(t)switch(typeof t=="string"&&(t=JSON.parse(t)),e=e.split("."),e[e.length-1]==="json"&&e.pop(),e.length===3&&e.shift(),e=e.length>1?e[1]:e[0],e){case"reg":this.fastupdate=!1,this.reg=Bt(t,this.reg);break;case"map":this.map=pt(t,this.map);break;case"ctx":this.ctx=jt(t,this.ctx)}},W.serialize=function(e=!0){let t="",n="",i="";if(this.reg.size){let o;for(var r of this.reg.keys())o||(o=typeof r),t+=(t?",":"")+(o==="string"?'"'+r+'"':r);t="index.reg=new Set(["+t+"]);",n=zt(this.map,o),n="index.map=new Map(["+n+"]);";for(let s of this.ctx.entries()){r=s[0];let l=zt(s[1],o);l="new Map(["+l+"])",l='["'+r+'",'+l+"]",i+=(i?",":"")+l}i="index.ctx=new Map(["+i+"]);"}return e?"function inject(index){"+t+n+i+"}":t+n+i},ie(Ct.prototype);var Gt=typeof window<"u"&&(window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB),It=["map","ctx","tag","reg","cfg"],kt=Ie();function Mt(e,t={}){if(!this||this.constructor!==Mt)return new Mt(e,t);typeof e=="object"&&(t=e,e=e.name),e||console.info("Default storage space was used, because a name was not passed."),this.id="flexsearch"+(e?":"+e.toLowerCase().replace(/[^a-z0-9_\-]/g,""):""),this.field=t.field?t.field.toLowerCase().replace(/[^a-z0-9_\-]/g,""):"",this.type=t.type,this.fastupdate=this.support_tag_search=!1,this.db=null,this.h={}}W=Mt.prototype,W.mount=function(e){return e.index?e.mount(this):(e.db=this,this.open())},W.open=function(){if(this.db)return this.db;let e=this;navigator.storage&&navigator.storage.persist&&navigator.storage.persist(),kt[e.id]||(kt[e.id]=[]),kt[e.id].push(e.field);let t=Gt.open(e.id,1);return t.onupgradeneeded=function(){let n=e.db=this.result;for(let i=0,r;i<It.length;i++){r=It[i];for(let o=0,s;o<kt[e.id].length;o++)s=kt[e.id][o],n.objectStoreNames.contains(r+(r!=="reg"&&s?":"+s:""))||n.createObjectStore(r+(r!=="reg"&&s?":"+s:""))}},e.db=Tt(t,function(n){e.db=n,e.db.onversionchange=function(){e.close()}})},W.close=function(){this.db&&this.db.close(),this.db=null},W.destroy=function(){let e=Gt.deleteDatabase(this.id);return Tt(e)},W.clear=function(){let e=[];for(let n=0,i;n<It.length;n++){i=It[n];for(let r=0,o;r<kt[this.id].length;r++)o=kt[this.id][r],e.push(i+(i!=="reg"&&o?":"+o:""))}let t=this.db.transaction(e,"readwrite");for(let n=0;n<e.length;n++)t.objectStore(e[n]).clear();return Tt(t)},W.get=function(e,t,n=0,i=0,r=!0,o=!1){e=this.db.transaction((t?"ctx":"map")+(this.field?":"+this.field:""),"readonly").objectStore((t?"ctx":"map")+(this.field?":"+this.field:"")).get(t?t+":"+e:e);let s=this;return Tt(e).then(function(l){let a=[];if(!l||!l.length)return a;if(r){if(!n&&!i&&l.length===1)return l[0];for(let u=0,m;u<l.length;u++)if((m=l[u])&&m.length){if(i>=m.length){i-=m.length;continue}let d=n?i+Math.min(m.length-i,n):m.length;for(let C=i;C<d;C++)a.push(m[C]);if(i=0,a.length===n)break}return o?s.enrich(a):a}return l})},W.tag=function(e,t=0,n=0,i=!1){e=this.db.transaction("tag"+(this.field?":"+this.field:""),"readonly").objectStore("tag"+(this.field?":"+this.field:"")).get(e);let r=this;return Tt(e).then(function(o){return!o||!o.length||n>=o.length?[]:!t&&!n?o:(o=o.slice(n,n+t),i?r.enrich(o):o)})},W.enrich=function(e){typeof e!="object"&&(e=[e]);let t=this.db.transaction("reg","readonly").objectStore("reg"),n=[];for(let i=0;i<e.length;i++)n[i]=Tt(t.get(e[i]));return Promise.all(n).then(function(i){for(let r=0;r<i.length;r++)i[r]={id:e[r],doc:i[r]?JSON.parse(i[r]):null};return i})},W.has=function(e){return e=this.db.transaction("reg","readonly").objectStore("reg").getKey(e),Tt(e).then(function(t){return!!t})},W.search=null,W.info=function(){},W.transaction=function(e,t,n){e+=e!=="reg"&&this.field?":"+this.field:"";let i=this.h[e+":"+t];if(i)return n.call(this,i);let r=this.db.transaction(e,t);this.h[e+":"+t]=i=r.objectStore(e);let o=n.call(this,i);return this.h[e+":"+t]=null,Tt(r).finally(function(){return o})},W.commit=async function(e){let t=e.commit_task,n=[];e.commit_task=[];for(let i=0,r;i<t.length;i++)r=t[i],r.del&&n.push(r.del);n.length&&await this.remove(n),e.reg.size&&(await this.transaction("map","readwrite",function(i){for(let r of e.map){let o=r[0],s=r[1];s.length&&(i.get(o).onsuccess=function(){let l=this.result;var a;if(l&&l.length){let u=Math.max(l.length,s.length);for(let m=0,d,C;m<u;m++)if((C=s[m])&&C.length){if((d=l[m])&&d.length)for(a=0;a<C.length;a++)d.push(C[a]);else l[m]=C;a=1}}else l=s,a=1;a&&i.put(l,o)})}}),await this.transaction("ctx","readwrite",function(i){for(let r of e.ctx){let o=r[0],s=r[1];for(let l of s){let a=l[0],u=l[1];u.length&&(i.get(o+":"+a).onsuccess=function(){let m=this.result;var d;if(m&&m.length){let C=Math.max(m.length,u.length);for(let h=0,w,y;h<C;h++)if((y=u[h])&&y.length){if((w=m[h])&&w.length)for(d=0;d<y.length;d++)w.push(y[d]);else m[h]=y;d=1}}else m=u,d=1;d&&i.put(m,o+":"+a)})}}}),e.store?await this.transaction("reg","readwrite",function(i){for(let r of e.store){let o=r[0],s=r[1];i.put(typeof s=="object"?JSON.stringify(s):1,o)}}):e.bypass||await this.transaction("reg","readwrite",function(i){for(let r of e.reg.keys())i.put(1,r)}),e.tag&&await this.transaction("tag","readwrite",function(i){for(let r of e.tag){let o=r[0],s=r[1];s.length&&(i.get(o).onsuccess=function(){let l=this.result;l=l&&l.length?l.concat(s):s,i.put(l,o)})}}),e.map.clear(),e.ctx.clear(),e.tag&&e.tag.clear(),e.store&&e.store.clear(),e.document||e.reg.clear())};function _t(e,t,n){let i=e.value,r,o=0;for(let s=0,l;s<i.length;s++){if(l=n?i:i[s]){for(let a=0,u,m;a<t.length;a++)if(m=t[a],u=l.indexOf(m),u>=0)if(r=1,l.length>1)l.splice(u,1);else{i[s]=[];break}o+=l.length}if(n)break}o?r&&e.update(i):e.delete(),e.continue()}W.remove=function(e){return typeof e!="object"&&(e=[e]),Promise.all([this.transaction("map","readwrite",function(t){t.openCursor().onsuccess=function(){let n=this.result;n&&_t(n,e)}}),this.transaction("ctx","readwrite",function(t){t.openCursor().onsuccess=function(){let n=this.result;n&&_t(n,e)}}),this.transaction("tag","readwrite",function(t){t.openCursor().onsuccess=function(){let n=this.result;n&&_t(n,e,!0)}}),this.transaction("reg","readwrite",function(t){for(let n=0;n<e.length;n++)t.delete(e[n])})])};function Tt(e,t){return new Promise((n,i)=>{e.onsuccess=e.oncomplete=function(){t&&t(this.result),t=null,n(this.result)},e.onerror=e.onblocked=i,e=null})}var en={Index:Ct,Charset:He,Encoder:Fe,Document:Je,Worker:$,Resolver:ne,IndexedDB:Mt,Language:{}};function tn(e,t){if(!e)return;function n(r){r.target===this&&(r.preventDefault(),r.stopPropagation(),t())}function i(r){r.key.startsWith("Esc")&&(r.preventDefault(),t())}e?.addEventListener("click",n),window.addCleanup(()=>e?.removeEventListener("click",n)),document.addEventListener("keydown",i),window.addCleanup(()=>document.removeEventListener("keydown",i))}function Rt(e){for(;e.firstChild;)e.removeChild(e.firstChild)}var cn=Object.hasOwnProperty,nn=Se(tt(),1),fn=(0,nn.default)();function un(e){let t=$t(ln(e,"index"),!0);return t.length===0?"/":t}var Jt=(e,t,n)=>{let i=new URL(e.getAttribute(t),n);e.setAttribute(t,i.pathname+i.hash)};function hn(e,t){e.querySelectorAll('[href=""], [href^="./"], [href^="../"]').forEach(n=>Jt(n,"href",t)),e.querySelectorAll('[src=""], [src^="./"], [src^="../"]').forEach(n=>Jt(n,"src",t))}function Xt(e){let t=e.split("/").filter(n=>n!=="").slice(0,-1).map(n=>"..").join("/");return t.length===0&&(t="."),t}function rn(e,t){return on(Xt(e),un(t))}function on(...e){if(e.length===0)return"";let t=e.filter(n=>n!==""&&n!=="/").map(n=>$t(n)).join("/");return e[0].startsWith("/")&&(t="/"+t),e[e.length-1].endsWith("/")&&(t=t+"/"),t}function sn(e,t){return e===t||e.endsWith("/"+t)}function ln(e,t){return sn(e,t)&&(e=e.slice(0,-t.length)),e}function $t(e,t){return e.startsWith("/")&&(e=e.substring(1)),!t&&e.endsWith("/")&&(e=e.slice(0,-1)),e}var Et="basic",gt="",c=e=>e.toLowerCase().split(/\s+/).filter(t=>t.length>0),f=new en.Document({encode:c,document:{id:"id",tag:"tags",index:[{field:"title",tokenize:"forward"},{field:"content",tokenize:"forward"},{field:"tags",tokenize:"forward"}]}}),b=new DOMParser,x=new Map,P=30,j=8,H=5,D=e=>{let t=e.split(/\s+/).filter(i=>i.trim()!==""),n=t.length;if(n>1)for(let i=1;i<n;i++)t.push(t.slice(0,i+1).join(" "));return t.sort((i,r)=>r.length-i.length)};function Y(e,t,n){let i=D(e),r=t.split(/\s+/).filter(a=>a!==""),o=0,s=r.length-1;if(n){let a=C=>i.some(h=>C.toLowerCase().startsWith(h.toLowerCase())),u=r.map(a),m=0,d=0;for(let C=0;C<Math.max(r.length-P,0);C++){let h=u.slice(C,C+P).reduce((w,y)=>w+(y?1:0),0);h>=m&&(m=h,d=C)}o=Math.max(d-P,0),s=Math.min(o+2*P,r.length-1),r=r.slice(o,s)}let l=r.map(a=>{for(let u of i)if(a.toLowerCase().includes(u.toLowerCase())){let m=new RegExp(u.toLowerCase(),"gi");return a.replace(m,'<span class="highlight">$&</span>')}return a}).join(" ");return`${o===0?"":"..."}${l}${s===r.length-1?"":"..."}`}function oe(e){return e&&e.replace(/```\s*mermaid[\s\S]*?```/gi,"").trim()}function ae(e,t){let n=new DOMParser,i=D(e),r=n.parseFromString(t.innerHTML,"text/html"),o=l=>{let a=document.createElement("span");return a.className="highlight",a.textContent=l,a},s=(l,a)=>{if(l.nodeType===Node.TEXT_NODE){let u=l.nodeValue??"",m=new RegExp(a.toLowerCase(),"gi"),d=u.match(m);if(!d||d.length===0)return;let C=document.createElement("span"),h=0;for(let w of d){let y=u.indexOf(w,h);C.appendChild(document.createTextNode(u.slice(h,y))),C.appendChild(o(w)),h=y+w.length}C.appendChild(document.createTextNode(u.slice(h))),l.parentNode?.replaceChild(C,l)}else if(l.nodeType===Node.ELEMENT_NODE){if(l.classList.contains("highlight"))return;Array.from(l.childNodes).forEach(u=>s(u,a))}};for(let l of i)s(r.body,l);return r.body}async function z(e,t,n){let i=e.querySelector(".search-container");if(!i)return;let r=i.closest(".sidebar"),o=e.querySelector(".search-button");if(!o)return;let s=e.querySelector(".search-bar");if(!s)return;let l=e.querySelector(".search-layout");if(!l)return;let a=Object.keys(n),u=Z=>{l.appendChild(Z)},m=l.dataset.preview==="true",d,C,h=document.createElement("div");h.className="results-container",u(h),m&&(d=document.createElement("div"),d.className="preview-container",u(d));function w(){i.classList.remove("active"),s.value="",r&&(r.style.zIndex=""),Rt(h),d&&Rt(d),l.classList.remove("display-results"),Et="basic",o.focus()}function y(Z){Et=Z,r&&(r.style.zIndex="1"),i.classList.add("active"),s.focus()}let g=null;async function U(Z){if(Z.key==="k"&&(Z.ctrlKey||Z.metaKey)&&!Z.shiftKey){Z.preventDefault(),i.classList.contains("active")?w():y("basic");return}else if(Z.shiftKey&&(Z.ctrlKey||Z.metaKey)&&Z.key.toLowerCase()==="k"){Z.preventDefault(),i.classList.contains("active")?w():y("tags"),s.value="#";return}if(g&&g.classList.remove("focus"),!!i.classList.contains("active")){if(Z.key==="Enter"&&!Z.isComposing)if(h.contains(document.activeElement)){let Q=document.activeElement;if(Q.classList.contains("no-match"))return;await ce(Q),Q.click()}else{let Q=document.getElementsByClassName("result-card")[0];if(!Q||Q.classList.contains("no-match"))return;await ce(Q),Q.click()}else if(Z.key==="ArrowUp"||Z.shiftKey&&Z.key==="Tab"){if(Z.preventDefault(),h.contains(document.activeElement)){let Q=g||document.activeElement,ye=Q?.previousElementSibling;Q?.classList.remove("focus"),ye?.focus(),ye&&(g=ye),await ce(ye)}}else if((Z.key==="ArrowDown"||Z.key==="Tab")&&(Z.preventDefault(),document.activeElement===s||g!==null)){let Q=g||document.getElementsByClassName("result-card")[0],ye=Q?.nextElementSibling;Q?.classList.remove("focus"),ye?.focus(),ye&&(g=ye),await ce(ye)}}}let V=(Z,Q)=>{let ye=a[Q],Be=n[ye].content??"",We=Be.match(/<div[^>]*class[^>]*profile-info-box[^>]*>([\s\S]*?)<\/div>/i);if(We&&We[1]){let De=We[1],we=new DOMParser().parseFromString(`<div>${De}</div>`,"text/html").body.firstElementChild;we?(ae(Z,we),Be=we.innerHTML):Be=De}else{let De=[{label:"Birth",pattern:/Birth:\s*([^\n]+)/i},{label:"Parents",pattern:/Parents:\s*([^\n]+)/i},{label:"Siblings",pattern:/Siblings:\s*([^\n]+)/i},{label:"Spouse",pattern:/Spouse:\s*([^\n]+)/i},{label:"Children",pattern:/Children:\s*([^\n]+)/i}],we=[];if(De.forEach(({label:mt,pattern:xt})=>{let nt=Be.match(xt);nt&&nt[1]&&we.push(`<dt>${mt}:</dt><dd>${nt[1].trim()}</dd>`)}),we.length>0){Be=`<dl class="profile-info-list">${we.join("")}</dl>`;let mt=new DOMParser().parseFromString(`<div>${Be}</div>`,"text/html").body.firstElementChild;mt&&(ae(Z,mt),Be=mt.innerHTML)}else Be=oe(Be),Be=Y(Z,Be,!0)}return{id:Q,slug:ye,title:Et==="tags"?n[ye].title:Y(Z,n[ye].title??""),content:Be,tags:ee(Z.substring(1),n[ye].tags)}};function ee(Z,Q){return!Q||Et!=="tags"?[]:Q.map(ye=>ye.toLowerCase().includes(Z.toLowerCase())?`<li><p class="match-tag">#${ye}</p></li>`:`<li><p>#${ye}</p></li>`).slice(0,H)}function he(Z){return new URL(rn(t,Z),location.toString())}let Ae=({slug:Z,title:Q,content:ye,tags:Be})=>{let We=Be.length>0?`<ul class="tags">${Be.join("")}</ul>`:"",De=/<dl|<dt|<dd/.test(ye),we=document.createElement("a");we.classList.add("result-card"),we.id=Z,we.href=he(Z).toString(),De?we.innerHTML=`
        <h3 class="card-title">${Q}</h3>
        ${We}
        <div class="card-description">${ye}</div>
      `:we.innerHTML=`
        <h3 class="card-title">${Q}</h3>
        ${We}
        <p class="card-description">${ye}</p>
      `,we.addEventListener("click",nt=>{nt.altKey||nt.ctrlKey||nt.metaKey||nt.shiftKey||w()});let mt=nt=>{nt.altKey||nt.ctrlKey||nt.metaKey||nt.shiftKey||w()};async function xt(nt){if(!nt.target)return;let At=nt.target;await ce(At)}return we.addEventListener("mouseenter",xt),window.addCleanup(()=>we.removeEventListener("mouseenter",xt)),we.addEventListener("click",mt),window.addCleanup(()=>we.removeEventListener("click",mt)),we};async function Oe(Z){if(Rt(h),Z.length===0?h.innerHTML=`<a class="result-card no-match">
          <h3>No results.</h3>
          <p>Try another search term?</p>
      </a>`:h.append(...Z.map(Ae)),Z.length===0&&d)Rt(d);else{let Q=h.firstElementChild;Q.classList.add("focus"),g=Q,await ce(Q)}}async function Me(Z){if(x.has(Z))return x.get(Z);let Q=he(Z).toString(),ye=await fetch(Q).then(Be=>Be.text()).then(Be=>{if(Be===void 0)throw new Error(`Could not fetch ${Q}`);let We=b.parseFromString(Be??"","text/html");return hn(We,Q),[...We.getElementsByClassName("popover-hint")]});return x.set(Z,ye),ye}async function ce(Z){if(!l||!m||!Z||!d)return;let Q=Z.id,ye=await Me(Q).then(Be=>{let We=Be.flatMap(we=>[...ae(gt,we).children]),De=[];for(let we of We){if(we instanceof HTMLElement){if(we.querySelector("code.mermaid")||we.tagName==="CODE"&&we.classList.contains("mermaid")||we.id==="mermaid-container"||we.querySelector("#mermaid-container"))continue;if(we.tagName==="H2"){let nt=we.textContent?.trim()||"";if(nt==="Immediate Family"||nt==="Ancestors (up to 2 Gen.)"||nt==="Descendants (up to 2 Gen.)")continue}let mt=we.querySelectorAll("h2"),xt=!1;for(let nt of mt){let At=nt.textContent?.trim()||"";if(At==="Immediate Family"||At==="Ancestors (up to 2 Gen.)"||At==="Descendants (up to 2 Gen.)"){xt=!0;break}}if(xt)continue}De.push(we)}return De});C=document.createElement("div"),C.classList.add("preview-inner"),C.append(...ye),d.replaceChildren(C),[...d.getElementsByClassName("highlight")].sort((Be,We)=>We.innerHTML.length-Be.innerHTML.length)[0]?.scrollIntoView({block:"start"})}async function Pe(Z){if(!l||!f)return;gt=Z.target.value,l.classList.toggle("display-results",gt!==""),Et=gt.startsWith("#")?"tags":"basic";let Q;if(Et==="tags"){gt=gt.substring(1).trim();let We=gt.indexOf(" ");if(We!=-1){let De=gt.substring(0,We),we=gt.substring(We+1).trim();Q=await f.searchAsync({query:we,limit:Math.max(j,1e4),index:["title","content"],tag:{tags:De}});for(let mt of Q)mt.result=mt.result.slice(0,j);Et="basic",gt=we}else Q=await f.searchAsync({query:gt,limit:j,index:["tags"]})}else Et==="basic"&&(Q=await f.searchAsync({query:gt,limit:j,index:["title","content"]}));let ye=We=>{let De=Q.filter(we=>we.field===We);return De.length===0?[]:[...De[0].result]},Be=[...new Set([...ye("title"),...ye("content"),...ye("tags")])].map(We=>V(gt,We));await Oe(Be)}document.addEventListener("keydown",U),window.addCleanup(()=>document.removeEventListener("keydown",U)),o.addEventListener("click",()=>y("basic")),window.addCleanup(()=>o.removeEventListener("click",()=>y("basic"))),s.addEventListener("input",Pe),window.addCleanup(()=>s.removeEventListener("input",Pe)),tn(i,w),await _(n)}var le=!1;async function _(e){if(le)return;let t=0,n=[];for(let[i,r]of Object.entries(e))n.push(f.addAsync(t++,{id:t,slug:i,title:r.title,content:r.content,tags:r.tags}));await Promise.all(n),le=!0}document.addEventListener("nav",async e=>{let t=e.detail.url,n=await fetchData,i=document.getElementsByClassName("search");for(let r of i)await z(r,t,n)})})(),(function(){var ke=Object.create,re=Object.defineProperty,qe=Object.getOwnPropertyDescriptor,Ee=Object.getOwnPropertyNames,de=Object.getPrototypeOf,ze=Object.prototype.hasOwnProperty,ve=(G,O)=>()=>(O||G((O={exports:{}}).exports,O),O.exports),pe=(G,O,J,xe)=>{if(O&&typeof O=="object"||typeof O=="function")for(let Le of Ee(O))!ze.call(G,Le)&&Le!==J&&re(G,Le,{get:()=>O[Le],enumerable:!(xe=qe(O,Le))||xe.enumerable});return G},Se=(G,O,J)=>(J=G!=null?ke(de(G)):{},pe(O||!G||!G.__esModule?re(J,"default",{value:G,enumerable:!0}):J,G)),Ze=ve((G,O)=>{"use strict";O.exports=xe;function J(He){return He instanceof Buffer?Buffer.from(He):new He.constructor(He.buffer.slice(),He.byteOffset,He.length)}function xe(He){if(He=He||{},He.circles)return Le(He);let L=new Map;if(L.set(Date,A=>new Date(A)),L.set(Map,(A,B)=>new Map(N(Array.from(A),B))),L.set(Set,(A,B)=>new Set(N(Array.from(A),B))),He.constructorHandlers)for(let A of He.constructorHandlers)L.set(A[0],A[1]);let k=null;return He.proto?S:I;function N(A,B){let v=Object.keys(A),q=new Array(v.length);for(let ie=0;ie<v.length;ie++){let F=v[ie],X=A[F];typeof X!="object"||X===null?q[F]=X:X.constructor!==Object&&(k=L.get(X.constructor))?q[F]=k(X,B):ArrayBuffer.isView(X)?q[F]=J(X):q[F]=B(X)}return q}function I(A){if(typeof A!="object"||A===null)return A;if(Array.isArray(A))return N(A,I);if(A.constructor!==Object&&(k=L.get(A.constructor)))return k(A,I);let B={};for(let v in A){if(Object.hasOwnProperty.call(A,v)===!1)continue;let q=A[v];typeof q!="object"||q===null?B[v]=q:q.constructor!==Object&&(k=L.get(q.constructor))?B[v]=k(q,I):ArrayBuffer.isView(q)?B[v]=J(q):B[v]=I(q)}return B}function S(A){if(typeof A!="object"||A===null)return A;if(Array.isArray(A))return N(A,S);if(A.constructor!==Object&&(k=L.get(A.constructor)))return k(A,S);let B={};for(let v in A){let q=A[v];typeof q!="object"||q===null?B[v]=q:q.constructor!==Object&&(k=L.get(q.constructor))?B[v]=k(q,S):ArrayBuffer.isView(q)?B[v]=J(q):B[v]=S(q)}return B}}function Le(He){let L=[],k=[],N=new Map;if(N.set(Date,v=>new Date(v)),N.set(Map,(v,q)=>new Map(S(Array.from(v),q))),N.set(Set,(v,q)=>new Set(S(Array.from(v),q))),He.constructorHandlers)for(let v of He.constructorHandlers)N.set(v[0],v[1]);let I=null;return He.proto?B:A;function S(v,q){let ie=Object.keys(v),F=new Array(ie.length);for(let X=0;X<ie.length;X++){let be=ie[X],p=v[be];if(typeof p!="object"||p===null)F[be]=p;else if(p.constructor!==Object&&(I=N.get(p.constructor)))F[be]=I(p,q);else if(ArrayBuffer.isView(p))F[be]=J(p);else{let E=L.indexOf(p);E!==-1?F[be]=k[E]:F[be]=q(p)}}return F}function A(v){if(typeof v!="object"||v===null)return v;if(Array.isArray(v))return S(v,A);if(v.constructor!==Object&&(I=N.get(v.constructor)))return I(v,A);let q={};L.push(v),k.push(q);for(let ie in v){if(Object.hasOwnProperty.call(v,ie)===!1)continue;let F=v[ie];if(typeof F!="object"||F===null)q[ie]=F;else if(F.constructor!==Object&&(I=N.get(F.constructor)))q[ie]=I(F,A);else if(ArrayBuffer.isView(F))q[ie]=J(F);else{let X=L.indexOf(F);X!==-1?q[ie]=k[X]:q[ie]=A(F)}}return L.pop(),k.pop(),q}function B(v){if(typeof v!="object"||v===null)return v;if(Array.isArray(v))return S(v,B);if(v.constructor!==Object&&(I=N.get(v.constructor)))return I(v,B);let q={};L.push(v),k.push(q);for(let ie in v){let F=v[ie];if(typeof F!="object"||F===null)q[ie]=F;else if(F.constructor!==Object&&(I=N.get(F.constructor)))q[ie]=I(F,B);else if(ArrayBuffer.isView(F))q[ie]=J(F);else{let X=L.indexOf(F);X!==-1?q[ie]=k[X]:q[ie]=B(F)}}return L.pop(),k.pop(),q}}}),tt=Object.hasOwnProperty,W=Se(Ze(),1),Ne=(0,W.default)();function Ve(G){let O=ot(me(G,"index"),!0);return O.length===0?"/":O}function Ie(G){let O=G.split("/").filter(J=>J!=="").slice(0,-1).map(J=>"..").join("/");return O.length===0&&(O="."),O}function Ke(G,O){return ut(Ie(G),Ve(O))}function ut(...G){if(G.length===0)return"";let O=G.filter(J=>J!==""&&J!=="/").map(J=>ot(J)).join("/");return G[0].startsWith("/")&&(O="/"+O),G[G.length-1].endsWith("/")&&(O=O+"/"),O}function ht(G,O){return G===O||G.endsWith("/"+O)}function me(G,O){return ht(G,O)&&(G=G.slice(0,-O.length)),G}function ot(G,O){return G.startsWith("/")&&(G=G.substring(1)),!O&&G.endsWith("/")&&(G=G.slice(0,-1)),G}var at=class an{isFolder;children;slugSegments;fileSegmentHint;displayNameOverride;data;constructor(O,J){this.children=[],this.slugSegments=O,this.data=J??null,this.isFolder=!1,this.displayNameOverride=void 0}get displayName(){let O=this.data?.title==="index"?void 0:this.data?.title;return this.displayNameOverride??O??this.fileSegmentHint??this.slugSegment??""}set displayName(O){this.displayNameOverride=O}get slug(){let O=ut(...this.slugSegments);return this.isFolder?ut(O,"index"):O}get slugSegment(){return this.slugSegments[this.slugSegments.length-1]}makeChild(O,J){let xe=[...this.slugSegments,O[0]],Le=new an(xe,J);return this.children.push(Le),Le}insert(O,J){if(O.length===0)throw new Error("path is empty");this.isFolder=!0;let xe=O[0];if(O.length===1)xe==="index"?this.data??=J:this.makeChild(O,J);else if(O.length>1){let Le=this.children.find(L=>L.slugSegment===xe)??this.makeChild(O,void 0),He=J.filePath.split("/");Le.fileSegmentHint=He.at(-O.length),Le.insert(O.slice(1),J)}}add(O){this.insert(O.slug.split("/"),O)}findNode(O){return O.length===0||O.length===1&&O[0]==="index"?this:this.children.find(J=>J.slugSegment===O[0])?.findNode(O.slice(1))}ancestryChain(O){if(O.length===0||O.length===1&&O[0]==="index")return[this];let J=this.children.find(Le=>Le.slugSegment===O[0]);if(!J)return;let xe=J.ancestryChain(O.slice(1));if(xe)return[this,...xe]}filter(O){this.children=this.children.filter(O),this.children.forEach(J=>J.filter(O))}map(O){O(this),this.children.forEach(J=>J.map(O))}sort(O){this.children=this.children.sort(O),this.children.forEach(J=>J.sort(O))}static fromEntries(O){let J=new an([]);return O.forEach(([,xe])=>J.add(xe)),J}entries(){let O=J=>[[J.slug,J]].concat(...J.children.map(O));return O(this)}getFolderPaths(){return this.entries().filter(([O,J])=>J.isFolder).map(([O,J])=>O)}},Ue;function rt(){let G=this.closest(".explorer");if(!G)return;let O=G.classList.toggle("collapsed");G.setAttribute("aria-expanded",G.getAttribute("aria-expanded")==="true"?"false":"true"),O?document.documentElement.classList.remove("mobile-no-scroll"):document.documentElement.classList.add("mobile-no-scroll")}function Fe(G){G.stopPropagation();let O=G.target;if(!O)return;let J=O.nodeName==="svg"?O.parentElement:O.parentElement?.parentElement;if(!J)return;let xe=J.nextElementSibling;if(!xe)return;xe.classList.toggle("open");let Le=!xe.classList.contains("open");wt(xe,Le);let He=Ue.find(k=>k.path===J.dataset.folderpath);He?He.collapsed=Le:Ue.push({path:J.dataset.folderpath,collapsed:Le});let L=JSON.stringify(Ue);localStorage.setItem("fileTree",L)}function dt(G,O){let J=document.getElementById("template-file").content.cloneNode(!0).querySelector("li"),xe=J.querySelector("a");return xe.href=Ke(G,O.slug),xe.dataset.for=O.slug,xe.textContent=O.displayName,G===O.slug&&xe.classList.add("active"),J}function bt(G,O,J){let xe=document.getElementById("template-folder").content.cloneNode(!0).querySelector("li"),Le=xe.querySelector(".folder-container"),He=Le.querySelector("div"),L=xe.querySelector(".folder-outer"),k=L.querySelector("ul"),N=O.slug;if(Le.dataset.folderpath=N,J.folderClickBehavior==="link"){let B=He.querySelector(".folder-button"),v=document.createElement("a");v.href=Ke(G,N),v.dataset.for=N,v.className="folder-title",v.textContent=O.displayName,B.replaceWith(v)}else{let B=He.querySelector(".folder-title");B.textContent=O.displayName}let I=Ue.find(B=>B.path===N)?.collapsed??J.folderDefaultState==="collapsed",S=Ve(N),A=S===G.slice(0,S.length);(!I||A)&&L.classList.add("open");for(let B of O.children){let v=B.isFolder?bt(G,B,J):dt(G,B);k.appendChild(v)}return xe}async function lt(G){let O=document.querySelectorAll("div.explorer");for(let J of O){let xe=JSON.parse(J.dataset.dataFns||"{}"),Le={folderClickBehavior:J.dataset.behavior||"collapse",folderDefaultState:J.dataset.collapsed||"collapsed",useSavedState:J.dataset.savestate==="true",order:xe.order||["filter","map","sort"],sortFn:new Function("return "+(xe.sortFn||"undefined"))(),filterFn:new Function("return "+(xe.filterFn||"undefined"))(),mapFn:new Function("return "+(xe.mapFn||"undefined"))()},He=localStorage.getItem("fileTree"),L=He&&Le.useSavedState?JSON.parse(He):[],k=new Map(L.map(F=>[F.path,F.collapsed])),N=await fetchData,I=[...Object.entries(N)],S=at.fromEntries(I);for(let F of Le.order)switch(F){case"filter":Le.filterFn&&S.filter(Le.filterFn);break;case"map":Le.mapFn&&S.map(Le.mapFn);break;case"sort":Le.sortFn&&S.sort(Le.sortFn);break}Ue=S.getFolderPaths().map(F=>{let X=k.get(F);return{path:F,collapsed:X===void 0?Le.folderDefaultState==="collapsed":X}});let A=J.querySelector(".explorer-ul");if(!A)continue;let B=document.createDocumentFragment();for(let F of S.children){let X=F.isFolder?bt(G,F,Le):dt(G,F);B.appendChild(X)}A.insertBefore(B,A.firstChild);let v=sessionStorage.getItem("explorerScrollTop");if(v)A.scrollTop=parseInt(v);else{let F=A.querySelector(".active");F&&F.scrollIntoView({behavior:"smooth"})}let q=J.getElementsByClassName("explorer-toggle");for(let F of q)F.addEventListener("click",rt),window.addCleanup(()=>F.removeEventListener("click",rt));if(Le.folderClickBehavior==="collapse"){let F=J.getElementsByClassName("folder-button");for(let X of F)X.addEventListener("click",Fe),window.addCleanup(()=>X.removeEventListener("click",Fe))}let ie=J.getElementsByClassName("folder-icon");for(let F of ie)F.addEventListener("click",Fe),window.addCleanup(()=>F.removeEventListener("click",Fe))}}document.addEventListener("prenav",async()=>{let G=document.querySelector(".explorer-ul");G&&sessionStorage.setItem("explorerScrollTop",G.scrollTop.toString())}),document.addEventListener("nav",async G=>{let O=G.detail.url;await lt(O);for(let J of document.getElementsByClassName("explorer")){let xe=J.querySelector(".mobile-explorer");if(!xe)return;xe.checkVisibility()&&(J.classList.add("collapsed"),J.setAttribute("aria-expanded","false"),document.documentElement.classList.remove("mobile-no-scroll")),xe.classList.remove("hide-until-loaded")}}),window.addEventListener("resize",function(){let G=document.querySelector(".explorer");if(G&&!G.classList.contains("collapsed")){document.documentElement.classList.add("mobile-no-scroll");return}});function wt(G,O){return O?G.classList.remove("open"):G.classList.add("open")}})(),(function(){document.addEventListener("nav",ke=>{const re=new IntersectionObserver(de=>{for(const ze of de){const ve=ze.target.parentElement;if(!ve)return;ze.isIntersecting?ve.classList.remove("gradient-active"):ve.classList.add("gradient-active")}}),qe=document.getElementById("list-0");if(!qe)return;const Ee=qe.querySelector(".overflow-end");Ee&&(re.observe(Ee),window.addCleanup(()=>re.disconnect()))})})(),(function(){document.addEventListener("nav",ke=>{const re=new IntersectionObserver(de=>{for(const ze of de){const ve=ze.target.parentElement;if(!ve)return;ze.isIntersecting?ve.classList.remove("gradient-active"):ve.classList.add("gradient-active")}}),qe=document.getElementById("list-1");if(!qe)return;const Ee=qe.querySelector(".overflow-end");Ee&&(re.observe(Ee),window.addCleanup(()=>re.disconnect()))})})(),(function(){let ke=!1;function re(){if(ke){console.log("[Backlinks] Already loading, skipping duplicate call");return}const qe=document.querySelector(".backlinks[data-profile-id]");if(!qe)return;const Ee=qe.getAttribute("data-profile-id"),de=qe.getAttribute("data-base-path")||"";if(!Ee)return;ke=!0,qe.querySelectorAll(".chapter-backlink").forEach(function(pe){pe.parentElement.remove()});const ve=de&&!de.endsWith("/")?de+"/":de;fetch(ve+"static/backlinks-index.json").then(function(pe){return pe.ok?pe.json():(console.log("[Backlinks] No backlinks index found"),null)}).then(function(pe){if(!pe){ke=!1;return}const Se=pe[Ee];if(!Se||Se.length===0){ke=!1;return}const Ze=qe.querySelector("ul.overflow");if(!Ze){ke=!1;return}Se.forEach(function(tt){const W=document.createElement("li"),Ne=document.createElement("a"),Ve=ve+"profiles/"+encodeURIComponent(tt.profileSlug),Ie="#chapter="+tt.chapterSlug+"&tab=biography";Ne.href=Ve+Ie,Ne.className="internal chapter-backlink",Ne.textContent=tt.chapterTitle,W.appendChild(Ne);const Ke=Ze.querySelector(".overflow-end");Ke?Ze.insertBefore(W,Ke):Ze.appendChild(W)}),console.log("[Backlinks] Loaded",Se.length,"chapter backlinks for",Ee),ke=!1}).catch(function(pe){console.log("[Backlinks] Error loading backlinks index:",pe),ke=!1})}document.addEventListener("nav",function(){re()})})(),(function(){document.addEventListener("nav",ke=>{const re=new IntersectionObserver(de=>{for(const ze of de){const ve=ze.target.parentElement;if(!ve)return;ze.isIntersecting?ve.classList.remove("gradient-active"):ve.classList.add("gradient-active")}}),qe=document.getElementById("list-2");if(!qe)return;const Ee=qe.querySelector(".overflow-end");Ee&&(re.observe(Ee),window.addCleanup(()=>re.disconnect()))})})(),(function(){document.addEventListener("nav",ke=>{const re=new IntersectionObserver(de=>{for(const ze of de){const ve=ze.target.parentElement;if(!ve)return;ze.isIntersecting?ve.classList.remove("gradient-active"):ve.classList.add("gradient-active")}}),qe=document.getElementById("list-3");if(!qe)return;const Ee=qe.querySelector(".overflow-end");Ee&&(re.observe(Ee),window.addCleanup(()=>re.disconnect()))})})(),(function(){var ke=Object.create,re=Object.defineProperty,qe=Object.getOwnPropertyDescriptor,Ee=Object.getOwnPropertyNames,de=Object.getPrototypeOf,ze=Object.prototype.hasOwnProperty,ve=(c,f)=>()=>(f||c((f={exports:{}}).exports,f),f.exports),pe=(c,f,b,x)=>{if(f&&typeof f=="object"||typeof f=="function")for(let P of Ee(f))!ze.call(c,P)&&P!==b&&re(c,P,{get:()=>f[P],enumerable:!(x=qe(f,P))||x.enumerable});return c},Se=(c,f,b)=>(b=c!=null?ke(de(c)):{},pe(f||!c||!c.__esModule?re(b,"default",{value:c,enumerable:!0}):b,c)),Ze=ve((c,f)=>{"use strict";f.exports=x;function b(j){return j instanceof Buffer?Buffer.from(j):new j.constructor(j.buffer.slice(),j.byteOffset,j.length)}function x(j){if(j=j||{},j.circles)return P(j);let H=new Map;if(H.set(Date,z=>new Date(z)),H.set(Map,(z,le)=>new Map(Y(Array.from(z),le))),H.set(Set,(z,le)=>new Set(Y(Array.from(z),le))),j.constructorHandlers)for(let z of j.constructorHandlers)H.set(z[0],z[1]);let D=null;return j.proto?ae:oe;function Y(z,le){let _=Object.keys(z),e=new Array(_.length);for(let t=0;t<_.length;t++){let n=_[t],i=z[n];typeof i!="object"||i===null?e[n]=i:i.constructor!==Object&&(D=H.get(i.constructor))?e[n]=D(i,le):ArrayBuffer.isView(i)?e[n]=b(i):e[n]=le(i)}return e}function oe(z){if(typeof z!="object"||z===null)return z;if(Array.isArray(z))return Y(z,oe);if(z.constructor!==Object&&(D=H.get(z.constructor)))return D(z,oe);let le={};for(let _ in z){if(Object.hasOwnProperty.call(z,_)===!1)continue;let e=z[_];typeof e!="object"||e===null?le[_]=e:e.constructor!==Object&&(D=H.get(e.constructor))?le[_]=D(e,oe):ArrayBuffer.isView(e)?le[_]=b(e):le[_]=oe(e)}return le}function ae(z){if(typeof z!="object"||z===null)return z;if(Array.isArray(z))return Y(z,ae);if(z.constructor!==Object&&(D=H.get(z.constructor)))return D(z,ae);let le={};for(let _ in z){let e=z[_];typeof e!="object"||e===null?le[_]=e:e.constructor!==Object&&(D=H.get(e.constructor))?le[_]=D(e,ae):ArrayBuffer.isView(e)?le[_]=b(e):le[_]=ae(e)}return le}}function P(j){let H=[],D=[],Y=new Map;if(Y.set(Date,_=>new Date(_)),Y.set(Map,(_,e)=>new Map(ae(Array.from(_),e))),Y.set(Set,(_,e)=>new Set(ae(Array.from(_),e))),j.constructorHandlers)for(let _ of j.constructorHandlers)Y.set(_[0],_[1]);let oe=null;return j.proto?le:z;function ae(_,e){let t=Object.keys(_),n=new Array(t.length);for(let i=0;i<t.length;i++){let r=t[i],o=_[r];if(typeof o!="object"||o===null)n[r]=o;else if(o.constructor!==Object&&(oe=Y.get(o.constructor)))n[r]=oe(o,e);else if(ArrayBuffer.isView(o))n[r]=b(o);else{let s=H.indexOf(o);s!==-1?n[r]=D[s]:n[r]=e(o)}}return n}function z(_){if(typeof _!="object"||_===null)return _;if(Array.isArray(_))return ae(_,z);if(_.constructor!==Object&&(oe=Y.get(_.constructor)))return oe(_,z);let e={};H.push(_),D.push(e);for(let t in _){if(Object.hasOwnProperty.call(_,t)===!1)continue;let n=_[t];if(typeof n!="object"||n===null)e[t]=n;else if(n.constructor!==Object&&(oe=Y.get(n.constructor)))e[t]=oe(n,z);else if(ArrayBuffer.isView(n))e[t]=b(n);else{let i=H.indexOf(n);i!==-1?e[t]=D[i]:e[t]=z(n)}}return H.pop(),D.pop(),e}function le(_){if(typeof _!="object"||_===null)return _;if(Array.isArray(_))return ae(_,le);if(_.constructor!==Object&&(oe=Y.get(_.constructor)))return oe(_,le);let e={};H.push(_),D.push(e);for(let t in _){let n=_[t];if(typeof n!="object"||n===null)e[t]=n;else if(n.constructor!==Object&&(oe=Y.get(n.constructor)))e[t]=oe(n,le);else if(ArrayBuffer.isView(n))e[t]=b(n);else{let i=H.indexOf(n);i!==-1?e[t]=D[i]:e[t]=le(n)}}return H.pop(),D.pop(),e}}}),tt=Math.min,W=Math.max,Ne=Math.round,Ve=c=>({x:c,y:c}),Ie={left:"right",right:"left",bottom:"top",top:"bottom"},Ke={start:"end",end:"start"};function ut(c,f,b){return W(c,tt(f,b))}function ht(c,f){return typeof c=="function"?c(f):c}function me(c){return c.split("-")[0]}function ot(c){return c.split("-")[1]}function at(c){return c==="x"?"y":"x"}function Ue(c){return c==="y"?"height":"width"}var rt=new Set(["top","bottom"]);function Fe(c){return rt.has(me(c))?"y":"x"}function dt(c){return at(Fe(c))}function bt(c,f,b){b===void 0&&(b=!1);let x=ot(c),P=dt(c),j=Ue(P),H=P==="x"?x===(b?"end":"start")?"right":"left":x==="start"?"bottom":"top";return f.reference[j]>f.floating[j]&&(H=L(H)),[H,L(H)]}function lt(c){let f=L(c);return[wt(c),f,wt(f)]}function wt(c){return c.replace(/start|end/g,f=>Ke[f])}var G=["left","right"],O=["right","left"],J=["top","bottom"],xe=["bottom","top"];function Le(c,f,b){switch(c){case"top":case"bottom":return b?f?O:G:f?G:O;case"left":case"right":return f?J:xe;default:return[]}}function He(c,f,b,x){let P=ot(c),j=Le(me(c),b==="start",x);return P&&(j=j.map(H=>H+"-"+P),f&&(j=j.concat(j.map(wt)))),j}function L(c){return c.replace(/left|right|bottom|top/g,f=>Ie[f])}function k(c){return{top:0,right:0,bottom:0,left:0,...c}}function N(c){return typeof c!="number"?k(c):{top:c,right:c,bottom:c,left:c}}function I(c){let{x:f,y:b,width:x,height:P}=c;return{width:x,height:P,top:b,left:f,right:f+x,bottom:b+P,x:f,y:b}}function S(c,f,b){let{reference:x,floating:P}=c,j=Fe(f),H=dt(f),D=Ue(H),Y=me(f),oe=j==="y",ae=x.x+x.width/2-P.width/2,z=x.y+x.height/2-P.height/2,le=x[D]/2-P[D]/2,_;switch(Y){case"top":_={x:ae,y:x.y-P.height};break;case"bottom":_={x:ae,y:x.y+x.height};break;case"right":_={x:x.x+x.width,y:z};break;case"left":_={x:x.x-P.width,y:z};break;default:_={x:x.x,y:x.y}}switch(ot(f)){case"start":_[H]-=le*(b&&oe?-1:1);break;case"end":_[H]+=le*(b&&oe?-1:1);break}return _}var A=async(c,f,b)=>{let{placement:x="bottom",strategy:P="absolute",middleware:j=[],platform:H}=b,D=j.filter(Boolean),Y=await(H.isRTL==null?void 0:H.isRTL(f)),oe=await H.getElementRects({reference:c,floating:f,strategy:P}),{x:ae,y:z}=S(oe,x,Y),le=x,_={},e=0;for(let t=0;t<D.length;t++){let{name:n,fn:i}=D[t],{x:r,y:o,data:s,reset:l}=await i({x:ae,y:z,initialPlacement:x,placement:le,strategy:P,middlewareData:_,rects:oe,platform:H,elements:{reference:c,floating:f}});ae=r??ae,z=o??z,_={..._,[n]:{..._[n],...s}},l&&e<=50&&(e++,typeof l=="object"&&(l.placement&&(le=l.placement),l.rects&&(oe=l.rects===!0?await H.getElementRects({reference:c,floating:f,strategy:P}):l.rects),{x:ae,y:z}=S(oe,le,Y)),t=-1)}return{x:ae,y:z,placement:le,strategy:P,middlewareData:_}};async function B(c,f){var b;f===void 0&&(f={});let{x,y:P,platform:j,rects:H,elements:D,strategy:Y}=c,{boundary:oe="clippingAncestors",rootBoundary:ae="viewport",elementContext:z="floating",altBoundary:le=!1,padding:_=0}=ht(f,c),e=N(_),t=D[le?z==="floating"?"reference":"floating":z],n=I(await j.getClippingRect({element:(b=await(j.isElement==null?void 0:j.isElement(t)))==null||b?t:t.contextElement||await(j.getDocumentElement==null?void 0:j.getDocumentElement(D.floating)),boundary:oe,rootBoundary:ae,strategy:Y})),i=z==="floating"?{x,y:P,width:H.floating.width,height:H.floating.height}:H.reference,r=await(j.getOffsetParent==null?void 0:j.getOffsetParent(D.floating)),o=await(j.isElement==null?void 0:j.isElement(r))?await(j.getScale==null?void 0:j.getScale(r))||{x:1,y:1}:{x:1,y:1},s=I(j.convertOffsetParentRelativeRectToViewportRelativeRect?await j.convertOffsetParentRelativeRectToViewportRelativeRect({elements:D,rect:i,offsetParent:r,strategy:Y}):i);return{top:(n.top-s.top+e.top)/o.y,bottom:(s.bottom-n.bottom+e.bottom)/o.y,left:(n.left-s.left+e.left)/o.x,right:(s.right-n.right+e.right)/o.x}}var v=function(c){return c===void 0&&(c={}),{name:"flip",options:c,async fn(f){var b,x;let{placement:P,middlewareData:j,rects:H,initialPlacement:D,platform:Y,elements:oe}=f,{mainAxis:ae=!0,crossAxis:z=!0,fallbackPlacements:le,fallbackStrategy:_="bestFit",fallbackAxisSideDirection:e="none",flipAlignment:t=!0,...n}=ht(c,f);if((b=j.arrow)!=null&&b.alignmentOffset)return{};let i=me(P),r=Fe(D),o=me(D)===D,s=await(Y.isRTL==null?void 0:Y.isRTL(oe.floating)),l=le||(o||!t?[L(D)]:lt(D)),a=e!=="none";!le&&a&&l.push(...He(D,t,e,s));let u=[D,...l],m=await B(f,n),d=[],C=((x=j.flip)==null?void 0:x.overflows)||[];if(ae&&d.push(m[i]),z){let g=bt(P,H,s);d.push(m[g[0]],m[g[1]])}if(C=[...C,{placement:P,overflows:d}],!d.every(g=>g<=0)){var h,w;let g=(((h=j.flip)==null?void 0:h.index)||0)+1,U=u[g];if(U&&(!(z==="alignment"&&r!==Fe(U))||C.every(ee=>Fe(ee.placement)===r?ee.overflows[0]>0:!0)))return{data:{index:g,overflows:C},reset:{placement:U}};let V=(w=C.filter(ee=>ee.overflows[0]<=0).sort((ee,he)=>ee.overflows[1]-he.overflows[1])[0])==null?void 0:w.placement;if(!V)switch(_){case"bestFit":{var y;let ee=(y=C.filter(he=>{if(a){let Ae=Fe(he.placement);return Ae===r||Ae==="y"}return!0}).map(he=>[he.placement,he.overflows.filter(Ae=>Ae>0).reduce((Ae,Oe)=>Ae+Oe,0)]).sort((he,Ae)=>he[1]-Ae[1])[0])==null?void 0:y[0];ee&&(V=ee);break}case"initialPlacement":V=D;break}if(P!==V)return{reset:{placement:V}}}return{}}}};function q(c){let f=tt(...c.map(j=>j.left)),b=tt(...c.map(j=>j.top)),x=W(...c.map(j=>j.right)),P=W(...c.map(j=>j.bottom));return{x:f,y:b,width:x-f,height:P-b}}function ie(c){let f=c.slice().sort((P,j)=>P.y-j.y),b=[],x=null;for(let P=0;P<f.length;P++){let j=f[P];!x||j.y-x.y>x.height/2?b.push([j]):b[b.length-1].push(j),x=j}return b.map(P=>I(q(P)))}var F=function(c){return c===void 0&&(c={}),{name:"inline",options:c,async fn(f){let{placement:b,elements:x,rects:P,platform:j,strategy:H}=f,{padding:D=2,x:Y,y:oe}=ht(c,f),ae=Array.from(await(j.getClientRects==null?void 0:j.getClientRects(x.reference))||[]),z=ie(ae),le=I(q(ae)),_=N(D);function e(){if(z.length===2&&z[0].left>z[1].right&&Y!=null&&oe!=null)return z.find(n=>Y>n.left-_.left&&Y<n.right+_.right&&oe>n.top-_.top&&oe<n.bottom+_.bottom)||le;if(z.length>=2){if(Fe(b)==="y"){let C=z[0],h=z[z.length-1],w=me(b)==="top",y=C.top,g=h.bottom,U=w?C.left:h.left,V=w?C.right:h.right,ee=V-U,he=g-y;return{top:y,bottom:g,left:U,right:V,width:ee,height:he,x:U,y}}let n=me(b)==="left",i=W(...z.map(C=>C.right)),r=tt(...z.map(C=>C.left)),o=z.filter(C=>n?C.left===r:C.right===i),s=o[0].top,l=o[o.length-1].bottom,a=r,u=i,m=u-a,d=l-s;return{top:s,bottom:l,left:a,right:u,width:m,height:d,x:a,y:s}}return le}let t=await j.getElementRects({reference:{getBoundingClientRect:e},floating:x.floating,strategy:H});return P.reference.x!==t.reference.x||P.reference.y!==t.reference.y||P.reference.width!==t.reference.width||P.reference.height!==t.reference.height?{reset:{rects:t}}:{}}}},X=function(c){return c===void 0&&(c={}),{name:"shift",options:c,async fn(f){let{x:b,y:x,placement:P}=f,{mainAxis:j=!0,crossAxis:H=!1,limiter:D={fn:n=>{let{x:i,y:r}=n;return{x:i,y:r}}},...Y}=ht(c,f),oe={x:b,y:x},ae=await B(f,Y),z=Fe(me(P)),le=at(z),_=oe[le],e=oe[z];if(j){let n=le==="y"?"top":"left",i=le==="y"?"bottom":"right",r=_+ae[n],o=_-ae[i];_=ut(r,_,o)}if(H){let n=z==="y"?"top":"left",i=z==="y"?"bottom":"right",r=e+ae[n],o=e-ae[i];e=ut(r,e,o)}let t=D.fn({...f,[le]:_,[z]:e});return{...t,data:{x:t.x-b,y:t.y-x,enabled:{[le]:j,[z]:H}}}}}};function be(){return typeof window<"u"}function p(c){return $(c)?(c.nodeName||"").toLowerCase():"#document"}function E(c){var f;return(c==null||(f=c.ownerDocument)==null?void 0:f.defaultView)||window}function M(c){var f;return(f=($(c)?c.ownerDocument:c.document)||window.document)==null?void 0:f.documentElement}function $(c){return be()?c instanceof Node||c instanceof E(c).Node:!1}function K(c){return be()?c instanceof Element||c instanceof E(c).Element:!1}function T(c){return be()?c instanceof HTMLElement||c instanceof E(c).HTMLElement:!1}function R(c){return!be()||typeof ShadowRoot>"u"?!1:c instanceof ShadowRoot||c instanceof E(c).ShadowRoot}var te=new Set(["inline","contents"]);function Te(c){let{overflow:f,overflowX:b,overflowY:x,display:P}=Xe(c);return/auto|scroll|overlay|hidden|clip/.test(f+x+b)&&!te.has(P)}var et=new Set(["table","td","th"]);function it(c){return et.has(p(c))}var ue=[":popover-open",":modal"];function _e(c){return ue.some(f=>{try{return c.matches(f)}catch{return!1}})}var se=["transform","translate","scale","rotate","perspective"],fe=["transform","translate","scale","rotate","perspective","filter"],Ge=["paint","layout","strict","content"];function ne(c){let f=je(),b=K(c)?Xe(c):c;return se.some(x=>b[x]?b[x]!=="none":!1)||(b.containerType?b.containerType!=="normal":!1)||!f&&(b.backdropFilter?b.backdropFilter!=="none":!1)||!f&&(b.filter?b.filter!=="none":!1)||fe.some(x=>(b.willChange||"").includes(x))||Ge.some(x=>(b.contain||"").includes(x))}function Ye(c){let f=Qe(c);for(;T(f)&&!Ce(f);){if(ne(f))return f;if(_e(f))return null;f=Qe(f)}return null}function je(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}var $e=new Set(["html","body","#document"]);function Ce(c){return $e.has(p(c))}function Xe(c){return E(c).getComputedStyle(c)}function vt(c){return K(c)?{scrollLeft:c.scrollLeft,scrollTop:c.scrollTop}:{scrollLeft:c.scrollX,scrollTop:c.scrollY}}function Qe(c){if(p(c)==="html")return c;let f=c.assignedSlot||c.parentNode||R(c)&&c.host||M(c);return R(f)?f.host:f}function Je(c){let f=Qe(c);return Ce(f)?c.ownerDocument?c.ownerDocument.body:c.body:T(f)&&Te(f)?f:Je(f)}function st(c,f,b){var x;f===void 0&&(f=[]),b===void 0&&(b=!0);let P=Je(c),j=P===((x=c.ownerDocument)==null?void 0:x.body),H=E(P);if(j){let D=Re(H);return f.concat(H,H.visualViewport||[],Te(P)?P:[],D&&b?st(D):[])}return f.concat(P,st(P,[],b))}function Re(c){return c.parent&&Object.getPrototypeOf(c.parent)?c.frameElement:null}function ct(c){let f=Xe(c),b=parseFloat(f.width)||0,x=parseFloat(f.height)||0,P=T(c),j=P?c.offsetWidth:b,H=P?c.offsetHeight:x,D=Ne(b)!==j||Ne(x)!==H;return D&&(b=j,x=H),{width:b,height:x,$:D}}function pt(c){return K(c)?c:c.contextElement}function yt(c){let f=pt(c);if(!T(f))return Ve(1);let b=f.getBoundingClientRect(),{width:x,height:P,$:j}=ct(f),H=(j?Ne(b.width):b.width)/x,D=(j?Ne(b.height):b.height)/P;return(!H||!Number.isFinite(H))&&(H=1),(!D||!Number.isFinite(D))&&(D=1),{x:H,y:D}}var jt=Ve(0);function Ot(c){let f=E(c);return!je()||!f.visualViewport?jt:{x:f.visualViewport.offsetLeft,y:f.visualViewport.offsetTop}}function Bt(c,f,b){return f===void 0&&(f=!1),!b||f&&b!==E(c)?!1:f}function St(c,f,b,x){f===void 0&&(f=!1),b===void 0&&(b=!1);let P=c.getBoundingClientRect(),j=pt(c),H=Ve(1);f&&(x?K(x)&&(H=yt(x)):H=yt(c));let D=Bt(j,b,x)?Ot(j):Ve(0),Y=(P.left+D.x)/H.x,oe=(P.top+D.y)/H.y,ae=P.width/H.x,z=P.height/H.y;if(j){let le=E(j),_=x&&K(x)?E(x):x,e=le,t=Re(e);for(;t&&x&&_!==e;){let n=yt(t),i=t.getBoundingClientRect(),r=Xe(t),o=i.left+(t.clientLeft+parseFloat(r.paddingLeft))*n.x,s=i.top+(t.clientTop+parseFloat(r.paddingTop))*n.y;Y*=n.x,oe*=n.y,ae*=n.x,z*=n.y,Y+=o,oe+=s,e=E(t),t=Re(e)}}return I({width:ae,height:z,x:Y,y:oe})}function qt(c,f){let b=vt(c).scrollLeft;return f?f.left+b:St(M(c)).left+b}function Dt(c,f){let b=c.getBoundingClientRect(),x=b.left+f.scrollLeft-qt(c,b),P=b.top+f.scrollTop;return{x,y:P}}function zt(c){let{elements:f,rect:b,offsetParent:x,strategy:P}=c,j=P==="fixed",H=M(x),D=f?_e(f.floating):!1;if(x===H||D&&j)return b;let Y={scrollLeft:0,scrollTop:0},oe=Ve(1),ae=Ve(0),z=T(x);if((z||!z&&!j)&&((p(x)!=="body"||Te(H))&&(Y=vt(x)),T(x))){let _=St(x);oe=yt(x),ae.x=_.x+x.clientLeft,ae.y=_.y+x.clientTop}let le=H&&!z&&!j?Dt(H,Y):Ve(0);return{width:b.width*oe.x,height:b.height*oe.y,x:b.x*oe.x-Y.scrollLeft*oe.x+ae.x+le.x,y:b.y*oe.y-Y.scrollTop*oe.y+ae.y+le.y}}function Pt(c){return Array.from(c.getClientRects())}function Qt(c){let f=M(c),b=vt(c),x=c.ownerDocument.body,P=W(f.scrollWidth,f.clientWidth,x.scrollWidth,x.clientWidth),j=W(f.scrollHeight,f.clientHeight,x.scrollHeight,x.clientHeight),H=-b.scrollLeft+qt(c),D=-b.scrollTop;return Xe(x).direction==="rtl"&&(H+=W(f.clientWidth,x.clientWidth)-P),{width:P,height:j,x:H,y:D}}var Lt=25;function Nt(c,f){let b=E(c),x=M(c),P=b.visualViewport,j=x.clientWidth,H=x.clientHeight,D=0,Y=0;if(P){j=P.width,H=P.height;let ae=je();(!ae||ae&&f==="fixed")&&(D=P.offsetLeft,Y=P.offsetTop)}let oe=qt(x);if(oe<=0){let ae=x.ownerDocument,z=ae.body,le=getComputedStyle(z),_=ae.compatMode==="CSS1Compat"&&parseFloat(le.marginLeft)+parseFloat(le.marginRight)||0,e=Math.abs(x.clientWidth-z.clientWidth-_);e<=Lt&&(j-=e)}else oe<=Lt&&(j+=oe);return{width:j,height:H,x:D,y:Y}}var Vt=new Set(["absolute","fixed"]);function Kt(c,f){let b=St(c,!0,f==="fixed"),x=b.top+c.clientTop,P=b.left+c.clientLeft,j=T(c)?yt(c):Ve(1),H=c.clientWidth*j.x,D=c.clientHeight*j.y,Y=P*j.x,oe=x*j.y;return{width:H,height:D,x:Y,y:oe}}function Ft(c,f,b){let x;if(f==="viewport")x=Nt(c,b);else if(f==="document")x=Qt(M(c));else if(K(f))x=Kt(f,b);else{let P=Ot(c);x={x:f.x-P.x,y:f.y-P.y,width:f.width,height:f.height}}return I(x)}function Ht(c,f){let b=Qe(c);return b===f||!K(b)||Ce(b)?!1:Xe(b).position==="fixed"||Ht(b,f)}function Ct(c,f){let b=f.get(c);if(b)return b;let x=st(c,[],!1).filter(D=>K(D)&&p(D)!=="body"),P=null,j=Xe(c).position==="fixed",H=j?Qe(c):c;for(;K(H)&&!Ce(H);){let D=Xe(H),Y=ne(H);!Y&&D.position==="fixed"&&(P=null),(j?!Y&&!P:!Y&&D.position==="static"&&P&&Vt.has(P.position)||Te(H)&&!Y&&Ht(c,H))?x=x.filter(oe=>oe!==H):P=D,H=Qe(H)}return f.set(c,x),x}function Ut(c){let{element:f,boundary:b,rootBoundary:x,strategy:P}=c,j=[...b==="clippingAncestors"?_e(f)?[]:Ct(f,this._c):[].concat(b),x],H=j[0],D=j.reduce((Y,oe)=>{let ae=Ft(f,oe,P);return Y.top=W(ae.top,Y.top),Y.right=tt(ae.right,Y.right),Y.bottom=tt(ae.bottom,Y.bottom),Y.left=W(ae.left,Y.left),Y},Ft(f,H,P));return{width:D.right-D.left,height:D.bottom-D.top,x:D.left,y:D.top}}function Gt(c){let{width:f,height:b}=ct(c);return{width:f,height:b}}function It(c,f,b){let x=T(f),P=M(f),j=b==="fixed",H=St(c,!0,j,f),D={scrollLeft:0,scrollTop:0},Y=Ve(0);function oe(){Y.x=qt(P)}if(x||!x&&!j)if((p(f)!=="body"||Te(P))&&(D=vt(f)),x){let _=St(f,!0,j,f);Y.x=_.x+f.clientLeft,Y.y=_.y+f.clientTop}else P&&oe();j&&!x&&P&&oe();let ae=P&&!x&&!j?Dt(P,D):Ve(0),z=H.left+D.scrollLeft-Y.x-ae.x,le=H.top+D.scrollTop-Y.y-ae.y;return{x:z,y:le,width:H.width,height:H.height}}function kt(c){return Xe(c).position==="static"}function Mt(c,f){if(!T(c)||Xe(c).position==="fixed")return null;if(f)return f(c);let b=c.offsetParent;return M(c)===b&&(b=b.ownerDocument.body),b}function _t(c,f){let b=E(c);if(_e(c))return b;if(!T(c)){let P=Qe(c);for(;P&&!Ce(P);){if(K(P)&&!kt(P))return P;P=Qe(P)}return b}let x=Mt(c,f);for(;x&&it(x)&&kt(x);)x=Mt(x,f);return x&&Ce(x)&&kt(x)&&!ne(x)?b:x||Ye(c)||b}var Tt=async function(c){let f=this.getOffsetParent||_t,b=this.getDimensions,x=await b(c.floating);return{reference:It(c.reference,await f(c.floating),c.strategy),floating:{x:0,y:0,width:x.width,height:x.height}}};function en(c){return Xe(c).direction==="rtl"}var tn={convertOffsetParentRelativeRectToViewportRelativeRect:zt,getDocumentElement:M,getClippingRect:Ut,getOffsetParent:_t,getElementRects:Tt,getClientRects:Pt,getDimensions:Gt,getScale:yt,isElement:K,isRTL:en},Rt=X,cn=v,nn=F,fn=(c,f,b)=>{let x=new Map,P={platform:tn,...b},j={...P.platform,_c:x};return A(c,f,{...P,platform:j})},un=Object.hasOwnProperty,Jt=Se(Ze(),1),hn=(0,Jt.default)(),Xt=(c,f,b)=>{let x=new URL(c.getAttribute(f),b);c.setAttribute(f,x.pathname+x.hash)};function rn(c,f){c.querySelectorAll('[href=""], [href^="./"], [href^="../"]').forEach(b=>Xt(b,"href",f)),c.querySelectorAll('[src=""], [src^="./"], [src^="../"]').forEach(b=>Xt(b,"src",f))}var on=/<link rel="canonical" href="([^"]*)">/;async function sn(c){let f=new URL(c);f.searchParams.set("_t",Date.now().toString());let b=await fetch(`${f}`,{cache:"no-store",headers:{"Cache-Control":"no-cache"}});if(!b.headers.get("content-type")?.startsWith("text/html"))return b;let x=await b.clone().text(),[P,j]=x.match(on)??[];if(j){let H=new URL(j,c);return H.searchParams.set("_t",Date.now().toString()),fetch(`${H}`,{cache:"no-store",headers:{"Cache-Control":"no-cache"}})}return b}var ln=new DOMParser,$t=null;async function Et({clientX:c,clientY:f}){let b=$t=this;if(b.dataset.noPopover==="true")return;async function x(t){let{x:n,y:i}=await fn(b,t,{strategy:"fixed",middleware:[nn({x:c,y:f}),Rt(),cn()]});Object.assign(t.style,{transform:`translate(${n.toFixed()}px, ${i.toFixed()}px)`})}function P(t){if(gt(),t.classList.add("active-popover"),x(t),H!==""){let n=`#popover-internal-${H.slice(1)}`,i=e.querySelector(n);i&&e.scroll({top:i.offsetTop-12,behavior:"instant"})}}let j=new URL(b.href),H=decodeURIComponent(j.hash);j.hash="",j.search="";let D=`popover-${b.pathname}`,Y=document.getElementById(D);if(document.getElementById(D)){P(Y);return}let oe=await sn(j).catch(t=>{console.error(t)});if(!oe)return;let[ae]=oe.headers.get("Content-Type").split(";"),[z,le]=ae.split("/"),_=document.createElement("div");_.id=D,_.classList.add("popover");let e=document.createElement("div");switch(e.classList.add("popover-inner"),e.dataset.contentType=ae??void 0,_.appendChild(e),z){case"image":let t=document.createElement("img");t.src=j.toString(),t.alt=j.pathname,e.appendChild(t);break;case"application":switch(le){case"pdf":let o=document.createElement("iframe");o.src=j.toString(),e.appendChild(o);break;default:break}break;default:let n=await oe.text(),i=ln.parseFromString(n,"text/html");rn(i,j),i.querySelectorAll("[id]").forEach(o=>{let s=`popover-internal-${o.id}`;o.id=s});let r=[...i.getElementsByClassName("popover-hint")];if(r.length===0)return;r.forEach(o=>e.appendChild(o))}document.getElementById(D)||(document.body.appendChild(_),$t===this&&P(_))}function gt(){$t=null,document.querySelectorAll(".popover").forEach(c=>c.classList.remove("active-popover"))}document.addEventListener("nav",()=>{let c=[...document.querySelectorAll("a.internal")];for(let f of c)f.addEventListener("mouseenter",Et),f.addEventListener("mouseleave",gt),window.addCleanup(()=>{f.removeEventListener("mouseenter",Et),f.removeEventListener("mouseleave",gt)})})})(),(function(){const ke=document.createElement("script");ke.src="https://plausible.io/js/script.manual.js",ke.setAttribute("data-domain",location.hostname),ke.defer=!0,ke.onload=()=>{window.plausible=window.plausible||function(){(window.plausible.q=window.plausible.q||[]).push(arguments)},plausible("pageview"),document.addEventListener("nav",()=>{plausible("pageview")})},document.head.appendChild(ke)})(),(function(){var ke=Object.create,re=Object.defineProperty,qe=Object.getOwnPropertyDescriptor,Ee=Object.getOwnPropertyNames,de=Object.getPrototypeOf,ze=Object.prototype.hasOwnProperty,ve=(p,E)=>()=>(E||p((E={exports:{}}).exports,E),E.exports),pe=(p,E,M,$)=>{if(E&&typeof E=="object"||typeof E=="function")for(let K of Ee(E))!ze.call(p,K)&&K!==M&&re(p,K,{get:()=>E[K],enumerable:!($=qe(E,K))||$.enumerable});return p},Se=(p,E,M)=>(M=p!=null?ke(de(p)):{},pe(E||!p||!p.__esModule?re(M,"default",{value:p,enumerable:!0}):M,p)),Ze=ve((p,E)=>{"use strict";E.exports=$;function M(T){return T instanceof Buffer?Buffer.from(T):new T.constructor(T.buffer.slice(),T.byteOffset,T.length)}function $(T){if(T=T||{},T.circles)return K(T);let R=new Map;if(R.set(Date,ue=>new Date(ue)),R.set(Map,(ue,_e)=>new Map(Te(Array.from(ue),_e))),R.set(Set,(ue,_e)=>new Set(Te(Array.from(ue),_e))),T.constructorHandlers)for(let ue of T.constructorHandlers)R.set(ue[0],ue[1]);let te=null;return T.proto?it:et;function Te(ue,_e){let se=Object.keys(ue),fe=new Array(se.length);for(let Ge=0;Ge<se.length;Ge++){let ne=se[Ge],Ye=ue[ne];typeof Ye!="object"||Ye===null?fe[ne]=Ye:Ye.constructor!==Object&&(te=R.get(Ye.constructor))?fe[ne]=te(Ye,_e):ArrayBuffer.isView(Ye)?fe[ne]=M(Ye):fe[ne]=_e(Ye)}return fe}function et(ue){if(typeof ue!="object"||ue===null)return ue;if(Array.isArray(ue))return Te(ue,et);if(ue.constructor!==Object&&(te=R.get(ue.constructor)))return te(ue,et);let _e={};for(let se in ue){if(Object.hasOwnProperty.call(ue,se)===!1)continue;let fe=ue[se];typeof fe!="object"||fe===null?_e[se]=fe:fe.constructor!==Object&&(te=R.get(fe.constructor))?_e[se]=te(fe,et):ArrayBuffer.isView(fe)?_e[se]=M(fe):_e[se]=et(fe)}return _e}function it(ue){if(typeof ue!="object"||ue===null)return ue;if(Array.isArray(ue))return Te(ue,it);if(ue.constructor!==Object&&(te=R.get(ue.constructor)))return te(ue,it);let _e={};for(let se in ue){let fe=ue[se];typeof fe!="object"||fe===null?_e[se]=fe:fe.constructor!==Object&&(te=R.get(fe.constructor))?_e[se]=te(fe,it):ArrayBuffer.isView(fe)?_e[se]=M(fe):_e[se]=it(fe)}return _e}}function K(T){let R=[],te=[],Te=new Map;if(Te.set(Date,se=>new Date(se)),Te.set(Map,(se,fe)=>new Map(it(Array.from(se),fe))),Te.set(Set,(se,fe)=>new Set(it(Array.from(se),fe))),T.constructorHandlers)for(let se of T.constructorHandlers)Te.set(se[0],se[1]);let et=null;return T.proto?_e:ue;function it(se,fe){let Ge=Object.keys(se),ne=new Array(Ge.length);for(let Ye=0;Ye<Ge.length;Ye++){let je=Ge[Ye],$e=se[je];if(typeof $e!="object"||$e===null)ne[je]=$e;else if($e.constructor!==Object&&(et=Te.get($e.constructor)))ne[je]=et($e,fe);else if(ArrayBuffer.isView($e))ne[je]=M($e);else{let Ce=R.indexOf($e);Ce!==-1?ne[je]=te[Ce]:ne[je]=fe($e)}}return ne}function ue(se){if(typeof se!="object"||se===null)return se;if(Array.isArray(se))return it(se,ue);if(se.constructor!==Object&&(et=Te.get(se.constructor)))return et(se,ue);let fe={};R.push(se),te.push(fe);for(let Ge in se){if(Object.hasOwnProperty.call(se,Ge)===!1)continue;let ne=se[Ge];if(typeof ne!="object"||ne===null)fe[Ge]=ne;else if(ne.constructor!==Object&&(et=Te.get(ne.constructor)))fe[Ge]=et(ne,ue);else if(ArrayBuffer.isView(ne))fe[Ge]=M(ne);else{let Ye=R.indexOf(ne);Ye!==-1?fe[Ge]=te[Ye]:fe[Ge]=ue(ne)}}return R.pop(),te.pop(),fe}function _e(se){if(typeof se!="object"||se===null)return se;if(Array.isArray(se))return it(se,_e);if(se.constructor!==Object&&(et=Te.get(se.constructor)))return et(se,_e);let fe={};R.push(se),te.push(fe);for(let Ge in se){let ne=se[Ge];if(typeof ne!="object"||ne===null)fe[Ge]=ne;else if(ne.constructor!==Object&&(et=Te.get(ne.constructor)))fe[Ge]=et(ne,_e);else if(ArrayBuffer.isView(ne))fe[Ge]=M(ne);else{let Ye=R.indexOf(ne);Ye!==-1?fe[Ge]=te[Ye]:fe[Ge]=_e(ne)}}return R.pop(),te.pop(),fe}}}),tt=p=>(E,M)=>E[`node${p}`]===M[`node${p}`],W=tt("Name"),Ne=tt("Type"),Ve=tt("Value");function Ie(p,E){if(p.attributes.length===0&&E.attributes.length===0)return[];let M=[],$=new Map,K=new Map;for(let T of p.attributes)$.set(T.name,T.value);for(let T of E.attributes){let R=$.get(T.name);T.value===R?$.delete(T.name):(typeof R<"u"&&$.delete(T.name),K.set(T.name,T.value))}for(let T of $.keys())M.push({type:5,name:T});for(let[T,R]of K.entries())M.push({type:4,name:T,value:R});return M}function Ke(p,E=!0){let M=`${p.localName}`;for(let{name:$,value:K}of p.attributes)E&&$.startsWith("data-")||(M+=`[${$}=${K}]`);return M+=p.innerHTML,M}function ut(p){switch(p.tagName){case"BASE":case"TITLE":return p.localName;case"META":{if(p.hasAttribute("name"))return`meta[name="${p.getAttribute("name")}"]`;if(p.hasAttribute("property"))return`meta[name="${p.getAttribute("property")}"]`;break}case"LINK":{if(p.hasAttribute("rel")&&p.hasAttribute("href"))return`link[rel="${p.getAttribute("rel")}"][href="${p.getAttribute("href")}"]`;if(p.hasAttribute("href"))return`link[href="${p.getAttribute("href")}"]`;break}}return Ke(p)}function ht(p){let[E,M=""]=p.split("?");return`${E}?t=${Date.now()}&${M.replace(/t=\d+/g,"")}`}function me(p){if(p.nodeType===1&&p.hasAttribute("data-persist"))return p;if(p.nodeType===1&&p.localName==="script"){let E=document.createElement("script");for(let{name:M,value:$}of p.attributes)M==="src"&&($=ht($)),E.setAttribute(M,$);return E.innerHTML=p.innerHTML,E}return p.cloneNode(!0)}function ot(p,E){if(p.children.length===0&&E.children.length===0)return[];let M=[],$=new Map,K=new Map,T=new Map;for(let R of p.children)$.set(ut(R),R);for(let R of E.children){let te=ut(R),Te=$.get(te);Te?Ke(R,!1)!==Ke(Te,!1)&&K.set(te,me(R)):T.set(te,me(R)),$.delete(te)}for(let R of p.childNodes){if(R.nodeType===1){let te=ut(R);if($.has(te)){M.push({type:1});continue}else if(K.has(te)){let Te=K.get(te);M.push({type:3,attributes:Ie(R,Te),children:at(R,Te)});continue}}M.push(void 0)}for(let R of T.values())M.push({type:0,node:me(R)});return M}function at(p,E){let M=[],$=Math.max(p.childNodes.length,E.childNodes.length);for(let K=0;K<$;K++){let T=p.childNodes.item(K),R=E.childNodes.item(K);M[K]=Ue(T,R)}return M}function Ue(p,E){if(!p)return{type:0,node:me(E)};if(!E)return{type:1};if(Ne(p,E)){if(p.nodeType===3){let M=p.nodeValue,$=E.nodeValue;if(M.trim().length===0&&$.trim().length===0)return}if(p.nodeType===1){if(W(p,E)){let M=p.tagName==="HEAD"?ot:at;return{type:3,attributes:Ie(p,E),children:M(p,E)}}return{type:2,node:me(E)}}else return p.nodeType===9?Ue(p.documentElement,E.documentElement):Ve(p,E)?void 0:{type:2,value:E.nodeValue}}return{type:2,node:me(E)}}function rt(p,E){if(E.length!==0)for(let{type:M,name:$,value:K}of E)M===5?p.removeAttribute($):M===4&&p.setAttribute($,K)}async function Fe(p,E,M){if(!E)return;let $;switch(p.nodeType===9?(p=p.documentElement,$=p):M?$=M:$=p,E.type){case 0:{let{node:K}=E;p.appendChild(K);return}case 1:{if(!$)return;p.removeChild($);return}case 2:{if(!$)return;let{node:K,value:T}=E;if(typeof T=="string"){$.nodeValue=T;return}$.replaceWith(K);return}case 3:{if(!$)return;let{attributes:K,children:T}=E;rt($,K);let R=Array.from($.childNodes);await Promise.all(T.map((te,Te)=>Fe($,te,R[Te])));return}}}function dt(p,E){let M=Ue(p,E);return Fe(p,M)}var bt=Object.hasOwnProperty,lt=Se(Ze(),1),wt=(0,lt.default)();function G(p){return p.document.body.dataset.slug}var O=(p,E,M)=>{let $=new URL(p.getAttribute(E),M);p.setAttribute(E,$.pathname+$.hash)};function J(p,E){p.querySelectorAll('[href=""], [href^="./"], [href^="../"]').forEach(M=>O(M,"href",E)),p.querySelectorAll('[src=""], [src^="./"], [src^="../"]').forEach(M=>O(M,"src",E))}var xe=/<link rel="canonical" href="([^"]*)">/;async function Le(p){let E=new URL(p);E.searchParams.set("_t",Date.now().toString());let M=await fetch(`${E}`,{cache:"no-store",headers:{"Cache-Control":"no-cache"}});if(!M.headers.get("content-type")?.startsWith("text/html"))return M;let $=await M.clone().text(),[K,T]=$.match(xe)??[];if(T){let R=new URL(T,p);return R.searchParams.set("_t",Date.now().toString()),fetch(`${R}`,{cache:"no-store",headers:{"Cache-Control":"no-cache"}})}return M}var He=1,L=document.createElement("route-announcer"),k=p=>p?.nodeType===He,N=p=>{try{let E=new URL(p);if(window.location.origin===E.origin)return!0}catch{}return!1},I=p=>{let E=p.origin===window.location.origin,M=p.pathname===window.location.pathname;return E&&M},S=({target:p})=>{if(!k(p)||p.attributes.getNamedItem("target")?.value==="_blank")return;let E=p.closest("a");if(!E||"routerIgnore"in E.dataset)return;let{href:M}=E;if(N(M))return{url:new URL(M),scroll:"routerNoscroll"in E.dataset?!1:void 0}};function A(p){let E=new CustomEvent("nav",{detail:{url:p}});document.dispatchEvent(E)}var B=new Set;window.addCleanup=p=>B.add(p);function v(){let p=document.createElement("div");p.className="navigation-progress",p.style.width="0",document.body.contains(p)||document.body.appendChild(p),setTimeout(()=>{p.style.width="80%"},100)}var q=!1,ie;async function F(p,E=!1){q=!0,v(),ie=ie||new DOMParser;let M=await Le(p).then(R=>{if(R.headers.get("content-type")?.startsWith("text/html"))return R.text();window.location.assign(p)}).catch(()=>{window.location.assign(p)});if(!M)return;let $=new CustomEvent("prenav",{detail:{}});document.dispatchEvent($),B.forEach(R=>R()),B.clear();let K=ie.parseFromString(M,"text/html");J(K,p);let T=K.querySelector("title")?.textContent;if(T)document.title=T;else{let R=document.querySelector("h1");T=R?.innerText??R?.textContent??p.pathname}L.textContent!==T&&(L.textContent=T),L.dataset.persist="",K.body.appendChild(L),dt(document.body,K.body),E||(p.hash?document.getElementById(decodeURIComponent(p.hash.substring(1)))?.scrollIntoView():window.scrollTo({top:0})),document.head.querySelectorAll(":not([spa-preserve])").forEach(R=>R.remove()),K.head.querySelectorAll(":not([spa-preserve])").forEach(R=>document.head.appendChild(R)),E||history.pushState({},"",p),A(G(window)),delete L.dataset.persist}async function X(p,E=!1){if(!q){q=!0;try{await F(p,E)}catch(M){console.error(M),window.location.assign(p)}finally{q=!1}}}window.spaNavigate=X;function be(){return typeof window<"u"&&(window.addEventListener("click",async p=>{let{url:E}=S(p)??{};if(!(!E||p.ctrlKey||p.metaKey)){if(p.preventDefault(),I(E)&&E.hash){document.getElementById(decodeURIComponent(E.hash.substring(1)))?.scrollIntoView(),history.pushState({},"",E);return}X(E,!1)}}),window.addEventListener("popstate",p=>{let{url:E}=S(p)??{};window.location.hash&&window.location.pathname===E?.pathname||X(new URL(window.location.toString()),!0)})),new class{go(p){let E=new URL(p,window.location.toString());return X(E,!1)}back(){return window.history.back()}forward(){return window.history.forward()}}}if(be(),A(G(window)),!customElements.get("route-announcer")){let p={"aria-live":"assertive","aria-atomic":"true",style:"position: absolute; left: 0; top: 0; clip: rect(0 0 0 0); clip-path: inset(50%); overflow: hidden; white-space: nowrap; width: 1px; height: 1px"};customElements.define("route-announcer",class extends HTMLElement{constructor(){super()}connectedCallback(){for(let[E,M]of Object.entries(p))this.setAttribute(E,M)}})}})();
